(function () {function ba(a){return a&&a.__esModule?{d:a.default}:{d:a}}let M,ca,Fa={};function da(t,...e){(Fa[t]||[]).map(t=>t(...e))}function ea(){return M}function C(){return ca}function Ga(t){if(!(M=document.getElementById(t)||t||document.querySelector("canvas")))throw Error("You must provide a canvas element for the game");return(ca=M.getContext("2d")).imageSmoothingEnabled=!1,da("init"),{canvas:M,context:ca}}class Ha{constructor({spriteSheet:t,frames:e,frameRate:r,loop:i=!0}){this.spriteSheet=t,this.frames=e,this.frameRate=r,this.loop=i;let{width:$,height:o,margin:s=0}=t.frame;this.width=$,this.height=o,this.margin=s,this._f=0,this._a=0}clone(){return new Ha(this)}reset(){this._f=0,this._a=0}update(t=1/60){if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate}render({x:t,y:e,width:r=this.width,height:i=this.height,context:$=C()}){let o=this.frames[this._f]/this.spriteSheet._f|0,s=this.frames[this._f]%this.spriteSheet._f|0;$.drawImage(this.spriteSheet.image,s*this.width+(2*s+1)*this.margin,o*this.height+(2*o+1)*this.margin,this.width,this.height,t,e,r,i)}}let a=new WeakMap;function Ia(t,e){let r=Math.sin(e),i=Math.cos(e);return{x:t.x*i-t.y*r,y:t.x*r+t.y*i}}function D(t,e,r){return Math.min(Math.max(t,r),e)}function N(t,e){return t.rotation||e.rotation?null:([t,e]=[t,e].map(t=>fa(t)),t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y)}function fa(t){let{x:e,y:r,width:i,height:$}=t.world||t;return t.anchor&&(e-=i*t.anchor.x,r-=$*t.anchor.y),i<0&&(e+=i,i*=-1),$<0&&(r+=$,$*=-1),{x:e,y:r,width:i,height:$}}class k{constructor(t=0,e=0,r={}){this.x=t,this.y=e,r._c&&(this.clamp(r._a,r._b,r._d,r._e),this.x=t,this.y=e)}add(t){return new k(this.x+t.x,this.y+t.y,this)}subtract(t){return new k(this.x-t.x,this.y-t.y,this)}scale(t){return new k(this.x*t,this.y*t)}normalize(t=this.length()){return new k(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}clamp(t,e,r,i){this._c=!0,this._a=t,this._b=e,this._d=r,this._e=i}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?D(this._a,this._d,t):t}set y(t){this._y=this._c?D(this._b,this._e,t):t}}function j(){return new k(...arguments)}j.prototype=k.prototype,j.class=k;class Ja{constructor(t){return this.init(t)}init(t={}){this.position=j(),this.velocity=j(),this.acceleration=j(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let r=this.velocity;t&&(r=r.scale(t)),this.position=this.position.add(r),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}const z=()=>{},ga="position:absolute;left:-9999px";function O(t,e){let r=e.parentNode;if(t.setAttribute("data-kontra",""),r){let i=r.querySelector("[data-kontra]:last-of-type")||e;r.insertBefore(t,i.nextSibling)}else document.body.appendChild(t)}class P extends Ja{init({width:t=0,height:e=0,context:r=C(),render:i=this.draw,update:$=this.advance,children:o=[],anchor:s={x:0,y:0},sx:a=0,sy:n=0,opacity:h=1,rotation:w=0,scaleX:p=1,scaleY:l=1,...d}={}){this.children=[],super.init({width:t,height:e,context:r,anchor:s,sx:a,sy:n,opacity:h,rotation:w,scaleX:p,scaleY:l,...d}),this._di=!0,this._uw(),o.map(t=>this.addChild(t)),this._rf=i,this._uf=$}update(t){this._uf(t),this.children.map(t=>t.update&&t.update())}render(t){let e=this.context;e.save(),(this.x||this.y)&&e.translate(this.x,this.y),this.rotation&&e.rotate(this.rotation),(this.sx||this.sy)&&e.translate(-this.sx,-this.sy),1==this.scaleX&&1==this.scaleY||e.scale(this.scaleX,this.scaleY);let r=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(r||i)&&e.translate(r,i),this.context.globalAlpha=this.opacity,this._rf(),(r||i)&&e.translate(-r,-i);let $=this.children;t&&($=$.filter(t)),$.map(t=>t.render&&t.render()),e.restore()}draw(){}_pc(t,e){this._uw(),this.children.map(t=>t._pc())}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:r=1,_wr:i=0,_wsx:$=1,_wsy:o=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=r*this.opacity,this._wr=i+this.rotation;let{x:s,y:a}=Ia({x:this.x,y:this.y},i);this._wx=s,this._wy=a,this._wsx=$*this.scaleX,this._wsy=o*this.scaleY,this._wx=this.x*$,this._wy=this.y*o,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}addChild(t,{absolute:e=!1}={}){this.children.push(t),t.parent=this,t._pc=t._pc||z,t._pc()}removeChild(t){let e=this.children.indexOf(t);-1!==e&&(this.children.splice(e,1),t.parent=null,t._pc())}get opacity(){return this._opa}set opacity(t){this._opa=t,this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}function m(){return new P(...arguments)}m.prototype=P.prototype,m.class=P;class Q extends m.class{init({image:t,width:e=t?t.width:void 0,height:r=t?t.height:void 0,...i}={}){super.init({image:t,width:e,height:r,...i})}get animations(){return this._a}set animations(t){let e,r;for(e in this._a={},t)this._a[e]=t[e].clone(),r=r||this._a[e];this.currentAnimation=r,this.width=this.width||r.width,this.height=this.height||r.height}playAnimation(t){this.currentAnimation=this.animations[t],this.currentAnimation.loop||this.currentAnimation.reset()}advance(t){super.advance(t),this.currentAnimation&&this.currentAnimation.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function g(){return new Q(...arguments)}g.prototype=Q.prototype,g.class=Q;let Ka=/(\d+)(\w+)/;function La(t){let e=t.match(Ka),r=+e[1];return{size:r,unit:e[2],computed:r}}class R extends m.class{init({text:t="",textAlign:e="",lineHeight:r=1,font:i=C().font,...$}={}){super.init({text:t,textAlign:e,lineHeight:r,font:i,...$}),this._p()}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=La(t).computed}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}render(){this._d&&this._p(),super.render()}_p(){this._s=[],this._d=!1;let t=this.context;if(t.font=this.font,!this._s.length&&this._fw){let e=this.text.split(" "),r=0,i=2;for(;i<=e.length;i++){let $=e.slice(r,i).join(" ");t.measureText($).width>this._fw&&(this._s.push(e.slice(r,i-1).join(" ")),r=i-1)}this._s.push(e.slice(r,i).join(" "))}if(!this._s.length&&this.text.includes("\n")){let e=0;this.text.split("\n").map(r=>{this._s.push(r),e=Math.max(e,t.measureText(r).width)}),this._w=this._fw||e}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,e=this.textAlign,r=this.context;e=this.textAlign||("rtl"===r.canvas.dir?"right":"left"),t="right"===e?this.width:"center"===e?this.width/2|0:0,this._s.map((i,$)=>{r.textBaseline="top",r.textAlign=e,r.fillStyle=this.color,r.font=this.font,r.fillText(i,t,this._fs*this.lineHeight*$)})}}function S(){return new R(...arguments)}S.prototype=R.prototype,S.class=R;let Ma=new WeakMap;function Na(...t){t.map(t=>{let e=t.context?t.context.canvas:ea(),r=Ma.get(e);if(!r)throw new ReferenceError("Pointer events not initialized for the objects canvas");t._r||(t._r=t.render,t.render=function(){r._cf.push(this),this._r()},r._o.push(t))})}class c extends g.class{init({padX:t=0,padY:e=0,text:r,onDown:i,onUp:$,...o}={}){super.init({padX:t,padY:e,...o}),this.textNode=S({...r,context:this.context}),this.width||(this.width=this.textNode.width,this.height=this.textNode.height),Na(this),this.addChild(this.textNode),this._od=i||z,this._ou=$||z;const s=this._dn=document.createElement("button");s.style=ga,s.textContent=this.text,s.addEventListener("focus",()=>this.focus()),s.addEventListener("blur",()=>this.blur()),s.addEventListener("keydown",t=>this._kd(t)),s.addEventListener("keyup",t=>this._ku(t)),O(s,this.context.canvas),this._uw(),this._p()}get text(){return this.textNode.text}set text(t){this._d=!0,this.textNode.text=t}destroy(){this._dn.remove()}_p(){this.text!==this._dn.textContent&&(this._dn.textContent=this.text),this.textNode._p();let t=this.textNode.width+2*this.padX,e=this.textNode.height+2*this.padY;this.width=Math.max(t,this.width),this.height=Math.max(e,this.height),this._uw()}render(){this._d&&this._p(),super.render()}enable(){this.disabled=this._dn.disabled=!1,this.onEnable()}disable(){this.disabled=this._dn.disabled=!0,this.onDisable()}focus(){this.disabled||(this.focused=!0,document.activeElement!=this._dn&&this._dn.focus(),this.onFocus())}blur(){this.focused=!1,document.activeElement==this._dn&&this._dn.blur(),this.onBlur()}onOver(){this.disabled||(this.hovered=!0)}onOut(){this.hovered=!1}onEnable(){}onDisable(){}onFocus(){}onBlur(){}onDown(){this.disabled||(this.pressed=!0,this._od())}onUp(){this.disabled||(this.pressed=!1,this._ou())}_kd(t){"Enter"!=t.code&&"Space"!=t.code||this.onDown()}_ku(t){"Enter"!=t.code&&"Space"!=t.code||this.onUp()}}function Oa(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}function Pa({fps:t=60,clearCanvas:e=!0,update:r=z,render:i,context:$=C()}={}){if(!i)throw Error("You must provide a render() function");let o,s,a,n,h,w=0,p=1e3/t,l=1/t,d=e?Oa:z;function c(){if(s=requestAnimationFrame(c),a=performance.now(),n=a-o,o=a,!(n>1e3)){for(da("tick"),w+=n;w>=p;)h.update(l),w-=p;d($),h.render()}}return h={update:r,render:i,isStopped:!0,start(){o=performance.now(),this.isStopped=!1,requestAnimationFrame(c)},stop(){this.isStopped=!0,cancelAnimationFrame(s)},_frame:c,set _last(t){o=t}}}let Qa={set:(t,e,r)=>(e.startsWith("_")||(t._d=!0),Reflect.set(t,e,r))},ha={start:t=>t?1:0,center:()=>.5,end:t=>t?0:1};class d extends m.class{init({flow:t="column",align:e="start",justify:r="start",colGap:i=0,rowGap:$=0,numCols:o=1,dir:s="",breakpoints:a=[],...n}={}){return super.init({flow:t,align:e,justify:r,colGap:i,rowGap:$,numCols:o,dir:s,breakpoints:a,...n}),this._p(),new Proxy(this,Qa)}addChild(t){this._d=!0,super.addChild(t)}removeChild(t){this._d=!0,super.removeChild(t)}render(){this._d&&this._p(),super.render()}destroy(){this.children.map(t=>t.destroy&&t.destroy())}_p(){this._d=!1,this.breakpoints.map(t=>{t.metric.call(this)&&this._b!==t&&(this._b=t,t.callback.call(this))});let t=this._g=[],e=this._cw=[],r=this._rh=[],i=this.children,$=this._nc="column"===this.flow?1:"row"===this.flow?i.length:this.numCols,o=0,s=0;for(let d,c=0;d=i[c];c++){t[o]=t[o]||[],d._p&&d._p(),r[o]=Math.max(r[o]||0,d.height);let i=d.colSpan||1,a=i;do{e[s]=Math.max(e[s]||0,d.width/a),t[o][s]=d}while(a+s++<=$&&--i);s>=$&&(s=0,o++)}for(;s>0&&s<$;)t[o][s++]=!1;let a=t.length,n=[].concat(this.colGap),h=[].concat(this.rowGap);this._w=e.reduce((t,e)=>t+=e,0);for(let d=0;d<$-1;d++)this._w+=n[d%n.length];this._h=r.reduce((t,e)=>t+=e,0);for(let d=0;d<a-1;d++)this._h+=h[d%h.length];this._uw();let w="rtl"===this.context.canvas.dir&&!this.dir||"rtl"===this.dir;this._rtl=w,w&&(this._g=t.map(t=>t.reverse()),this._cw=e.reverse());let p=-this.anchor.y*this.height,l=[];this._g.map((t,i)=>{let $=-this.anchor.x*this.width;t.map((t,o)=>{if(t&&!l.includes(t)){l.push(t);let s=ha[t.justifySelf||this.justify](this._rtl),a=ha[t.alignSelf||this.align](),h=t.colSpan||1,w=e[o];if(h>1&&o+h<=this._nc)for(let t=1;t<h;t++)w+=e[o+t]+n[(o+t)%n.length];let d=w*s,c=r[i]*a,x=0,Y=0,{width:u,height:Z}=t;if(t.anchor&&(x=t.anchor.x,Y=t.anchor.y),0===s)d+=u*x;else if(.5===s){d+=(x<.5?-1:.5===x?0:1)*u*s}else d-=u*(1-x);if(0===a)c+=Z*Y;else if(.5===a){c+=(Y<.5?-1:.5===Y?0:1)*Z*a}else c-=Z*(1-Y);t.x=$+d,t.y=p+c}$+=e[o]+n[o%n.length]}),p+=r[i]+h[i%h.length]})}}let ia={},U={},v={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down"};function Ra(t){let e=v[t.code];U[e]=!0,ia[e]&&ia[e](t)}function Sa(t){U[v[t.code]]=!1}function Ta(){U={}}function Ua(){let t;for(t=0;t<26;t++)v[t+65]=v["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)v[48+t]=v["Digit"+t]=""+t;window.addEventListener("keydown",Ra),window.addEventListener("keyup",Sa),window.addEventListener("blur",Ta)}function A(t){return!!U[t]}function ja(t,e){let r=[],i=e.x+e.width/2,$=e.y+e.height/2,{x:o,y:s,width:a,height:n}=fa(t),h=t.y<$,w=t.y+t.height>=$;return t.x<i&&(h&&r.push(0),w&&r.push(2)),t.x+t.width>=i&&(h&&r.push(1),w&&r.push(3)),r}class Va{constructor({maxDepth:t=3,maxObjects:e=25,bounds:r}={}){this.maxDepth=t,this.maxObjects=e;let i=ea();this.bounds=r||{x:0,y:0,width:i.width,height:i.height},this._b=!1,this._d=0,this._o=[],this._s=[],this._p=null}clear(){this._s.map(function(t){t.clear()}),this._b=!1,this._o.length=0}get(t){let e=new Set;for(;this._s.length&&this._b;)return ja(t,this.bounds).map(r=>{this._s[r].get(t).map(t=>e.add(t))}),Array.from(e);return this._o.filter(e=>e!==t)}add(...t){t.map(t=>{Array.isArray(t)?this.add.apply(this,t):this._b?this._a(t):(this._o.push(t),this._o.length>this.maxObjects&&this._d<this.maxDepth&&(this._sp(),this._o.map(t=>this._a(t)),this._o.length=0))})}_a(t){ja(t,this.bounds).map(e=>{this._s[e].add(t)})}_sp(t,e,r){if(this._b=!0,!this._s.length)for(t=this.bounds.width/2|0,e=this.bounds.height/2|0,r=0;r<4;r++)this._s[r]=new Va({bounds:{x:this.bounds.x+(r%2==1?t:0),y:this.bounds.y+(r>=2?e:0),width:t,height:e},maxDepth:this.maxDepth,maxObjects:this.maxObjects}),this._s[r]._d=this._d+1,this._s[r]._p=this}}function V(t){let e=[];return t._dn?e.push(t._dn):t.children&&t.children.map(t=>{e=e.concat(V(t))}),e}class W extends m.class{init({id:t,name:e=t,cullObjects:r=!0,cullFunction:i=N,...$}){const o=this._dn=document.createElement("section");o.tabIndex=-1,o.style=ga,o.id=t,o.setAttribute("aria-label",e),super.init({id:t,name:e,cullObjects:r,cullFunction:i,...$}),O(o,this.context.canvas);let s=this.context.canvas;this.camera=m({x:s.width/2,y:s.height/2,width:s.width,height:s.height,anchor:{x:.5,y:.5}}),this.camera._pc=()=>{super._pc.call(this.camera);this.context.canvas;this.camera._wx=this.camera.x*this.scaleX,this.camera._wy=this.camera.y*this.scaleY}}show(){this.hidden=this._dn.hidden=!1;let t=this.children.find(t=>t.focus);t?t.focus():this._dn.focus(),this.onShow()}hide(){this.hidden=this._dn.hidden=!0,this.onHide()}addChild(t,e){super.addChild(t,e),V(t).map(t=>{this._dn.appendChild(t)})}removeChild(t){super.removeChild(t),V(t).map(t=>{O(t,this.context.canvas)})}destroy(){this._dn.remove(),this.children.map(t=>t.destroy&&t.destroy())}update(t){this.hidden||super.update(t)}lookAt(t){let e=(t=t.world||t).x,r=t.y;t.scaleX&&(e/=t.scaleX,r/=t.scaleY),this.camera.x=e,this.camera.y=r,this._pc()}_pc(){super._pc(),this.camera&&this.camera._pc()}render(){let{x:t,y:e,width:r,height:i}=this.camera;this.sx=t*this.scaleX-r/2,this.sy=e*this.scaleY-i/2,this.hidden||super.render(t=>!this.cullObjects||this.cullFunction(t,this.camera))}onShow(){}onHide(){}}function X(){return new W(...arguments)}X.prototype=W.prototype,X.class=W;var Wa={};Wa={run:{frameRate:10,frames:[{headRadius:10.857142857142858,headX:5,headY:6.7857142857142865,leftLeg:[2,15.642857142857144],leftKnee:[-3.5,23.785714285714285],leftFoot:[-11,31.928571428571427],leftFootTip:[-6.928571428571429,36],rightLeg:[8,15.642857142857144],rightKnee:[16.142857142857142,23.785714285714285],rightFoot:[8,27.857142857142854],rightFootTip:[12.071428571428571,31.928571428571423],featherRotation:270,featherMovement:2},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[-1,27.857142857142858],leftFoot:[-9.142857142857142,23.785714285714285],leftFootTip:[-11.178571428571427,27.857142857142854],rightLeg:[8,19.714285714285715],rightKnee:[11,27.857142857142858],rightFoot:[14,36],rightFootTip:[18.07142857142857,33.964285714285715],featherRotation:270,featherMovement:2},{headRadius:10.857142857142858,headX:5,headY:14.928571428571429,leftLeg:[2,21.75],leftKnee:[2,29.892857142857142],leftFoot:[-6.142857142857142,29.892857142857142],leftFootTip:[-6.142857142857142,33.964285714285715],rightLeg:[8,21.75],rightKnee:[11,29.892857142857142],rightFoot:[8,38.035714285714285],rightFootTip:[12.071428571428571,38.035714285714285],featherRotation:270,featherMovement:2},{headRadius:10.857142857142858,headX:5,headY:14.928571428571429,leftLeg:[2,21.75],leftKnee:[5,29.892857142857142],leftFoot:[-3.1428571428571423,30.892857142857142],leftFootTip:[-3.1428571428571423,34.964285714285715],rightLeg:[8,21.75],rightKnee:[5,29.892857142857142],rightFoot:[2,38.035714285714285],rightFootTip:[6.071428571428571,38.035714285714285],featherRotation:270}]},fall:{frameRate:10,frames:[{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[10.142857142857142,16.714285714285715],leftFoot:[2,27.857142857142858],leftFootTip:[6.071428571428571,30.857142857142858],rightLeg:[8,19.714285714285715],rightKnee:[16.142857142857142,16.714285714285715],rightFoot:[8,27.857142857142858],rightFootTip:[12.071428571428571,30.857142857142858],cloakRotation:90,featherMovement:2},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[10.142857142857142,16.714285714285715],leftFoot:[2,27.857142857142858],leftFootTip:[6.071428571428571,30.857142857142858],rightLeg:[8,19.714285714285715],rightKnee:[16.142857142857142,16.714285714285715],rightFoot:[8,27.857142857142858],rightFootTip:[12.071428571428571,30.857142857142858],cloakRotation:90,featherMovement:2},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[10.142857142857142,16.714285714285715],leftFoot:[2,27.857142857142858],leftFootTip:[6.071428571428571,30.857142857142858],rightLeg:[8,19.714285714285715],rightKnee:[16.142857142857142,16.714285714285715],rightFoot:[8,27.857142857142858],rightFootTip:[12.071428571428571,30.857142857142858],cloakRotation:90,featherMovement:2}]},idle:{frameRate:10,frames:[{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[2,27.857142857142858],leftFoot:[2,36],leftFootTip:[6.071428571428571,36],rightLeg:[8,19.714285714285715],rightKnee:[8,27.857142857142858],rightFoot:[8,36],rightFootTip:[12.071428571428571,36],cloakRotation:280,cloakMovement:0},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[2,27.857142857142858],leftFoot:[2,36],leftFootTip:[6.071428571428571,36],rightLeg:[8,19.714285714285715],rightKnee:[8,27.857142857142858],rightFoot:[8,36],rightFootTip:[12.071428571428571,35],cloakRotation:280,cloakMovement:0},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[2,27.857142857142858],leftFoot:[2,36],leftFootTip:[6.071428571428571,36],rightLeg:[8,19.714285714285715],rightKnee:[8,27.857142857142858],rightFoot:[8,36],rightFootTip:[12.071428571428571,36],cloakRotation:280,cloakMovement:0},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[2,27.857142857142858],leftFoot:[2,36],leftFootTip:[6.071428571428571,36],rightLeg:[8,19.714285714285715],rightKnee:[8,27.857142857142858],rightFoot:[8,36],rightFootTip:[12.071428571428571,36],cloakRotation:280,cloakMovement:0},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,19.714285714285715],leftKnee:[2,27.857142857142858],leftFoot:[2,36],leftFootTip:[6.071428571428571,36],rightLeg:[8,19.714285714285715],rightKnee:[8,27.857142857142858],rightFoot:[8,36],rightFootTip:[12.071428571428571,36],cloakRotation:280,cloakMovement:0}]},jump:{frameRate:10,frames:[{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,13.642857142857144],leftKnee:[-3.5,21.785714285714285],leftFoot:[-11,32.92857142857143],leftFootTip:[-10,37],rightLeg:[8,19.714285714285715],rightKnee:[2.5,27.857142857142858],rightFoot:[-3,36],rightFootTip:[-2,40.07142857142857],cloakRotation:330,featherRotation:240,featherMovement:2},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,13.642857142857144],leftKnee:[-3.5,21.785714285714285],leftFoot:[-11,32.92857142857143],leftFootTip:[-10,37],rightLeg:[8,19.714285714285715],rightKnee:[2.5,27.857142857142858],rightFoot:[-3,36],rightFootTip:[-2,40.07142857142857],cloakRotation:330,featherRotation:240,featherMovement:2},{headRadius:10.857142857142858,headX:5,headY:10.857142857142858,leftLeg:[2,13.642857142857144],leftKnee:[-3.5,21.785714285714285],leftFoot:[-11,32.92857142857143],leftFootTip:[-10,37],rightLeg:[8,19.714285714285715],rightKnee:[2.5,27.857142857142858],rightFoot:[-3,36],rightFootTip:[-2,40.07142857142857],cloakRotation:330,featherRotation:240,featherMovement:2}]}};function Xa({headRadius:t,headX:e,headY:o,leftLeg:i,leftKnee:n,leftFoot:h,leftFootTip:a,rightLeg:s,rightKnee:c,rightFoot:x,rightFootTip:l,cloakRotation:r,cloakMovement:d,featherRotation:T,featherMovement:f},$){this.context.beginPath(),this.context.fillStyle="black",this.context.arc(e,o,t,2*Math.PI,!1),this.context.fill(),Za.bind(this)({headRadius:t,headX:e,headY:o}),$a.bind(this)({headRadius:t,headX:e,headY:o,featherRotation:T,featherMovement:f,frameIndex:$}),Ya.bind(this)({headRadius:t,headX:e,headY:o,frameIndex:$,cloakRotation:r,cloakMovement:d}),this.context.beginPath(),this.context.strokeStyle="black",this.context.lineWidth=3,this.context.moveTo(...i),this.context.lineTo(...n),this.context.lineTo(...h),this.context.lineTo(...a),this.context.moveTo(...s),this.context.lineTo(...c),this.context.lineTo(...x),this.context.lineTo(...l),this.context.lineJoin="round",this.context.stroke(),ka.bind(this)({foot:h,footTip:a}),ka.bind(this)({foot:x,footTip:l})}function Ya({headRadius:t,headX:e,headY:o,cloakRotation:i=0,cloakSize:n=20,cloakMovement:h=2,frameIndex:a}){this.context.beginPath(),this.context.fillStyle="yellow",this.context.lineJoin="round",this.context.moveTo(e-t-1,o+2),this.context.lineTo(e+t+1,o+2),this.context.lineTo(e-t-1,o+4),this.context.lineTo(e-t-1,o+2),this.context.fill(),this.context.beginPath(),this.context.save(),this.context.translate(e-t-1,o+3),0!==i&&this.context.rotate(Math.PI/180*i),this.context.moveTo(0,-1);const s=a%3;0===s?(this.context.lineTo(-n,0),this.context.lineTo(-n,4),this.context.lineTo(0,1),this.context.lineTo(0,-1)):1===s?(this.context.lineTo(-n,0-h),this.context.lineTo(-n,4-h),this.context.lineTo(0,1),this.context.lineTo(0,-1)):2===s&&(this.context.lineTo(-n,0+h),this.context.lineTo(-n,4+h),this.context.lineTo(0,1),this.context.lineTo(0,-1)),this.context.restore(),this.context.fill()}function Za({headRadius:t,headX:e,headY:o}){this.context.beginPath(),this.context.fillStyle="blue",this.context.lineJoin="round",this.context.moveTo(e-t-1,o-3),this.context.lineTo(e+t+1,o-3),this.context.lineTo(e+t-2,o-8),this.context.lineTo(e-t+2,o-8),this.context.lineTo(e-t-1,o-3),this.context.fill()}function $a({headRadius:t,headX:e,headY:o,frameIndex:i,featherRotation:n=0,featherMovement:h=0}){this.context.save(),this.context.beginPath(),this.context.fillStyle="white",this.context.lineJoin="miter";const a=e-t+2,s=o-6;this.context.translate(a,s),0!==n&&this.context.rotate(Math.PI/180*n),this.context.moveTo(0,0);const c=i%3;0===c?(this.context.quadraticCurveTo(-4,-7,0,-14),this.context.quadraticCurveTo(4,-7,0,0)):1===c?(this.context.quadraticCurveTo(-4-h,-7,0,-14),this.context.quadraticCurveTo(4-h,-7,0,0)):2===c&&(this.context.quadraticCurveTo(-4+h,-7,0,-14),this.context.quadraticCurveTo(4+h,-7,0,0)),this.context.clip(),this.context.fillRect(-4,-14,8,14),this.context.fillStyle="black",this.context.fillRect(-4,-14,8,4),this.context.restore()}function ka({foot:t,footTip:e}){this.context.save(),this.context.beginPath(),this.context.strokeStyle="orange",this.context.lineWidth=3,this.context.moveTo(t[0]-1.5,t[1]),this.context.lineTo(e[0]+.5,e[1]),this.context.lineJoin="round",this.context.stroke(),this.context.restore()}const E=10,_a=8,ab=10,la=4,bb=15,y=.6,cb=.2,ma=3;function db(){var $uesm$$interop$default=ba(Wa);return g({group:2,zIndex:3,anchor:{x:.5,y:.5},x:100,y:10,width:10,height:112/3,dx:0,_a:0,_f:0,_currentAnimation:"run",_availableAnimations:$uesm$$interop$default.d,playCanvasAnimation:function(i){i!==this._currentAnimation&&(this._f=0,this._a=0,this._currentAnimation=i)},jumpFrames:0,isGrounded:!1,isJumping:!1,stillJumping:!1,hasDoubleJump:!1,render:function(){let i=this._availableAnimations[this._currentAnimation].frames[this._f];Xa.bind(this)(i,this._f)},updateAnimation:function(i=1/60){this._a+=i;const a=this._availableAnimations[this._currentAnimation];for(;this._a*a.frameRate>=1;)this._f=++this._f%a.frames.length,this._a-=1/a.frameRate},isPerformingJump:function(){return this.jumpFrames<la&&A("space")},isStillAscending:function(){return this.isJumping&&(this.jumpFrames<la||this.jumpFrames<bb&&this.stillJumping)},canDoubleJump:function(){return!this.stillJumping&&this.hasDoubleJump},isBreakingFall:function(){return this.dy>y&&A("space")},handleJump:function(){this.isPerformingJump()&&(this.isJumping=!0,this.stillJumping=!0),this.isStillAscending()&&(this.dy=-_a),A("space")||(this.stillJumping=!1),this.isGrounded||this.jumpFrames++,this.isBreakingFall()&&(this.canDoubleJump()?(this.dy=-ab,this.hasDoubleJump=!1):this.dy=cb),this.isGrounded=!1},handleMovement:function(){this.dx=0,A("q")&&(this.dx=-ma),A("d")&&(this.dx=ma),this.dx=D(-E,E,this.dx),this.dy=D(-E,E,this.dy)},update:function(i){this.updateAnimation(i),this.advance(),this.ddy=y,this.handleJump(),this.handleMovement(),this.dx>0?this.scaleX=1:this.dx<0&&(this.scaleX=-1);this.children[0];0===this.dx&&this.dy===y?this.playCanvasAnimation("idle"):this.dy===y?this.playCanvasAnimation("run"):this.dy<y?this.playCanvasAnimation("jump"):this.dy>y&&this.playCanvasAnimation("fall")},touchesGround:function(){this.isGrounded=!0,this.hasDoubleJump=!0,this.jumpFrames=0,this.isJumping=!1}})}var _={};const q={group:2,zIndex:1,x:0,y:0,blur:0};function b(o,n){(o=String(o).replace(/[^0-9a-f]/gi,"")).length<6&&(o=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]),n=n||0;var r,e,t="#";for(e=0;e<3;e++)r=parseInt(o.substr(2*e,2),16),t+=("00"+(r=Math.round(Math.min(Math.max(0,r+r*n),255)).toString(16))).substr(r.length);return t}const na={...q,width:50,height:50,color:"red"};_.defaultValues=na;const eb=function(t=na){return g({...t,type:"Ground",render:function(){this.context.beginPath(),this.context.fillStyle=this.color,this.context.rect(0,-2,this.width,this.height),this.context.fill()}})};_.makeEntity=eb;var F={};const oa={...q,foliageRadius:25,foliageColor:"#AAD293",trunkWidth:5,trunkHeight:100,trunkColor:"#3E4937"};F.defaultValues=oa;const fb=function(t=oa){let e=t.trunkColor,o=t.foliageColor;return 1===t.group&&(e=b(e,-.5),o=b(o,-.5)),3===t.group&&(e=b(e,.1),o=b(o,.1)),g({...t,type:"Tree",width:2*t.foliageRadius,height:t.foliageRadius+t.trunkHeight,trunkColor:e,foliageColor:o,render:pa})};function pa(){this.context.beginPath(),this.context.filter=`blur(${this.blur}px)`;const t=new Path2D;t.arc(this.foliageRadius,this.foliageRadius,this.foliageRadius,0,2*Math.PI),this.context.fillStyle=this.foliageColor,this.context.fill(t),this.context.fillStyle=this.trunkColor,this.context.fillRect(this.foliageRadius-this.trunkWidth/2,this.foliageRadius,this.trunkWidth,this.trunkHeight)}F.makeEntity=fb,F.render=pa;var G={};const qa={...q,scaleX:1,height:50,foliageColor:"#8ec36f",foliageShadowColor:"#72b44b"};G.defaultValues=qa;const gb=function(e=qa){let t=e.foliageShadowColor,o=e.foliageColor;return 1===e.group&&(t=b(t,-.5),o=b(o,-.5)),3===e.group&&(t=b(t,.1),o=b(o,.1)),g({...e,type:"Bush",foliageColor:o,foliageShadowColor:t,render:ra})};function ra(){const e=Math.round(this.height/2),t=this.height;this.width=2*t+e,this.context.beginPath(),this.context.filter=`blur(${this.blur}px)`,this.context.fillStyle=this.foliageShadowColor;const o=new Path2D;o.arc(e,t,e,0,Math.PI,!0),this.context.fill(o),this.context.fillStyle=this.foliageColor;const r=new Path2D;r.arc(t+e,t,t,0,Math.PI,!0),this.context.fill(r)}G.makeEntity=gb,G.render=ra;var H={};const sa={...q,hillWidth:100,hillHeight:50,color:"#AAD293"};H.defaultValues=sa;const hb=function(t=sa){let e=t.color;1===t.group&&(e=b(e,-.5)),3===t.group&&(e=b(e,.1));const i=.5*t.hillWidth,r=.5*t.hillHeight;return g({...t,type:"Hill",color:e,width:i,height:r,render:ta})};function ta(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.filter=`blur(${this.blur}px)`,this.context.moveTo(-this.width/2,this.hillHeight-this.height),this.context.quadraticCurveTo(this.hillWidth/2-this.width/2,-this.height,this.hillWidth-this.width/2,this.hillHeight-this.height),this.context.fill()}H.makeEntity=hb,H.render=ta;var I={};const ua={...q,width:50,height:50,color:"#AAD293"};I.defaultValues=ua;const ib=function(e=ua){let t=e.color;return 1===e.group&&(t=b(t,-.5)),3===e.group&&(t=b(t,.1)),g({...e,type:"Land",color:t,render:va})};function va(){this.context.beginPath(),this.context.fillStyle=this.color,this.context.rect(0,0,this.width,this.height),this.context.fill()}I.makeEntity=ib,I.render=va;var J={};const wa={...q,width:100,height:1e3,color:"#73955F"};J.defaultValues=wa;const jb=function(t=wa){return g({...t,type:"Sequoia",render:xa})};function xa(){let t=this.color;1===this.group&&(t=b(this.color,-.5)),3===this.group&&(t=b(this.color,.3)),this.context.beginPath(),this.context.filter=`blur(${this.blur}px)`,this.context.fillStyle=t,this.context.rect(0,0,this.width,this.height),this.context.fill()}J.makeEntity=jb,J.render=xa;var K={};const ya={...q,width:50,height:50,color:"#e3f0db",lightColor:"#f9fcf8"};K.defaultValues=ya;const kb=function(t=ya){return g({...t,type:"Sky",render:za})};function za(){this.context.beginPath();const t=this.context.createLinearGradient(0,this.height,0,0);t.addColorStop(0,this.lightColor),t.addColorStop(1,this.color),this.context.fillStyle=t,this.context.fillRect(0,0,this.width,this.height)}K.makeEntity=kb,K.render=za;function lb(r,e){return r.group<e.group?1:r.group>e.group?-1:r.zIndex<e.zIndex?1:r.zIndex>e.zIndex?-1:0}function mb(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}const Aa=20;class nb{constructor(){mb(this,"didCollide",!1)}update(e,r){const o=Da(e);o.advance();let t=!1;if(r.forEach(r=>{if(N(o,r))if(t=!0,sb(e,r))tb(e,r)?B(e,r):aa(e,r);else if(ub(e,r)){const t=qb(e,o,r),$=ob(e,o,r);t<=r.y?B(e,r):$>r.y+r.height?aa(e,r):e.isGrounded&&Ca(e,r)?Ba(e,r):wb(e,r)}else{const t=rb(e,o,r),$=pb(e,o,r);t<=r.y?B(e,r):$>r.y+r.height?aa(e,r):e.isGrounded&&Ca(e,r)?Ba(e,r):xb(e,r)}}),!t&&this.didCollide&&e.dy>0){const o=Da(e);o.dy=Aa,o.advance();const t=r.filter(e=>N(o,e));if(!t.length)return;const $=t.reduce((e,r)=>r.y>e.y?r:e,t[0]);vb(e,$)}this.didCollide=t}}function ob(e,r,o){return L({xa:e.x-e.width/2,ya:e.y-e.height/2},{xb:r.x-r.width/2,yb:r.y-r.height/2},o.x+o.width)}function pb(e,r,o){return L({xa:e.x+e.width/2,ya:e.y-e.height/2},{xb:r.x+r.width/2,yb:r.y-r.height/2},o.x)}function qb(e,r,o){return L({xa:e.x-e.width/2,ya:e.y+e.height/2},{xb:r.x-r.width/2,yb:r.y+r.height/2},o.x+o.width)}function rb(e,r,o){return L({xa:e.x+e.width/2,ya:e.y+e.height/2},{xb:r.x+r.width/2,yb:r.y+r.height/2},o.x)}function L({xa:e,ya:r},{xb:o,yb:t},$){const i=(t-r)/(o-e);return i*$+(r-i*e)}function sb(e,r){return e.x+e.width/2>r.x&&e.x-e.width/2<r.x+r.width}function tb(e,r){return e.y-e.height/2<r.y}function ub(e,r){return e.x-e.width/2>=r.x+r.width}function B(e,r){e.touchesGround(),e.y=r.y-e.height/2,e.dy=0}function Ba(e,r){B(e,r)}function vb(e,r){B(e,r)}function aa(e,r){e.y=r.y+r.height+e.height/2,e.dy=0}function wb(e,r){e.x=r.x+r.width+e.width/2,e.dx=0}function xb(e,r){e.x=r.x-e.width/2,e.dx=0}function Ca(e,r){return r.y>e.y+e.height/2-Aa}function Da(e){const r=new g({...e});return r.position=j(e.position.x,e.position.y),r.velocity=j(e.velocity.x,e.velocity.y),r.acceleration=j(e.acceleration.x,e.acceleration.y),r}var yb={};yb=[{width:12e3,height:1e3,color:"#AAD293",x:-1522,y:369,id:"d9a37cb8-2f5f-4e4c-acbb-9bf01b65a1f1",type:"Ground",group:2,zIndex:4},{group:1,zIndex:1,x:1860,y:349,hillWidth:800,hillHeight:1e3,color:"#AAD293",id:"10c4f9f5-78e3-4ed1-830f-94c3000f20d8",type:"Hill",blur:1},{group:2,zIndex:4,x:569,y:296,hillWidth:500,hillHeight:150,color:"#AAD293",id:"19d79319-bb40-4814-a44d-f83c54fe9482",type:"Hill"},{group:3,zIndex:1,x:1094,y:292,hillWidth:400,hillHeight:300,color:"#AAD293",id:"937619cb-e790-4725-9005-2d5c331cf85a",type:"Hill"},{group:3,zIndex:1,x:791,y:341,width:300,height:50,color:"#AAD293",id:"c70d9418-24db-4ab2-8a4c-e35f222c48b8",type:"Land"},{group:2,zIndex:1,x:1181,y:345,hillWidth:500,hillHeight:100,color:"#AAD293",id:"e701a6ac-6453-40e2-a9d3-110e9d1b0055",type:"Hill"},{group:3,zIndex:1,x:715,y:331,hillWidth:300,hillHeight:100,color:"#AAD293",id:"8e0522cc-aca6-432a-a6bb-da6fc80e1e99",type:"Hill"},{group:2,zIndex:5,x:617,y:-667,width:150,height:1e3,color:"#73955F",id:"ccba3241-57d8-42b7-ac70-c71eee482f5d",type:"Sequoia"},{group:2,zIndex:5,x:1637,y:-551,width:50,height:1e3,color:"#73955F",id:"4ae49ee2-e097-47f0-bf63-02290d0889d2",type:"Sequoia"},{group:1,zIndex:2,x:1964,y:-595,width:200,height:1e3,color:"#73955F",id:"d447ee8f-2caa-43f2-bb01-12272cd4141f",type:"Sequoia",blur:1},{group:3,zIndex:2,x:476,y:-623,width:100,height:1e3,color:"#73955F",id:"59135514-9ad2-4024-9dd2-2d18aeeaff74",type:"Sequoia"},{group:3,zIndex:1,x:847,y:-569,width:75,height:1e3,color:"#73955F",id:"121df6f5-7e6f-464f-99f7-8c603a8c88af",type:"Sequoia"},{group:3,zIndex:2,x:1128,y:-629,width:100,height:1e3,color:"#73955F",id:"89ff37b6-adae-4227-8e74-d122a32e6bcf",type:"Sequoia"},{group:1,zIndex:2,x:2170,y:298,blur:1,foliageRadius:25,foliageColor:"#AAD293",trunkWidth:5,trunkHeight:100,trunkColor:"#3E4937",id:"075fc3da-906a-4825-b764-374838cd86e1",type:"Tree"},{group:1,zIndex:2,x:2207,y:215,blur:1,foliageRadius:40,foliageColor:"#AAD293",trunkWidth:5,trunkHeight:250,trunkColor:"#3E4937",id:"427fa9e6-bb32-4230-8318-6bd230668676",type:"Tree"},{group:1,zIndex:2,x:1881,y:283,blur:1,foliageRadius:35,foliageColor:"#AAD293",trunkWidth:5,trunkHeight:100,trunkColor:"#3E4937",id:"84dba48e-23f0-4b1e-b72c-ad751a36e7ca",type:"Tree"},{group:2,zIndex:1,x:437,y:327,blur:0,scaleX:-1,height:50,foliageColor:"#8ec36f",foliageShadowColor:"#72b44b",id:"fbb9e4cb-47aa-43aa-8479-a2ac42f88d29",type:"Bush"},{group:2,zIndex:5,x:912,y:340,blur:0,scaleX:1,height:30,foliageColor:"#8ec36f",foliageShadowColor:"#72b44b",id:"137d4d9d-bbd6-4117-9dde-9e3deb233759",type:"Bush"},{group:3,zIndex:2,x:964,y:224,blur:0,foliageRadius:30,foliageColor:"#AAD293",trunkWidth:5,trunkHeight:100,trunkColor:"#3E4937",id:"cad9036b-c431-40bf-996b-703a4d8ff769",type:"Tree"},{group:3,zIndex:2,x:1027,y:184,blur:0,foliageRadius:25,foliageColor:"#AAD293",trunkWidth:5,trunkHeight:200,trunkColor:"#3E4937",id:"ce52d1b0-1a43-4be1-85d4-f05be24dbbb6",type:"Tree"},{group:2,zIndex:2,x:1313,y:234,blur:0,foliageRadius:25,foliageColor:"#AAD293",trunkWidth:5,trunkHeight:100,trunkColor:"#3E4937",id:"9b6ac078-9e6b-47e9-81ab-4b60255f3d95",type:"Tree"},{group:2,zIndex:4,x:1537,y:320,blur:0,scaleX:1,height:50,foliageColor:"#8ec36f",foliageShadowColor:"#72b44b",id:"a3a0bc50-a887-4f89-9bd9-54c901ab3a89",type:"Bush"},{group:2,zIndex:4,x:1770,y:330,blur:0,scaleX:-1,height:40,foliageColor:"#8ec36f",foliageShadowColor:"#72b44b",id:"fe0694f9-4d5d-4f18-889d-5a6f90668db4",type:"Bush"},{group:4,zIndex:1,x:-1501,y:-686,blur:0,width:8e3,height:2e3,color:"#e3f0db",lightColor:"#f9fcf8",id:"6434c337-4d6e-43f8-8f5e-b9cf09b50003",type:"Sky"}];const zb={Ground:_,Tree:F,Bush:G,Hill:H,Land:I,Sequoia:J,Sky:K};function Ab(){const e=db(),r=Bb(),n=r.filter(e=>2===e.group),i=r.filter(e=>1===e.group),$=r.filter(e=>3===e.group),t=n.filter(e=>["Ground"].includes(e.type)),a=new nb;return X({id:"game",children:[e,...r].sort(lb),update:function(){a.update(e,t),this.camera.x=e.x,this.camera.y=e.y,i.forEach(r=>{r.dx=1.5*e.dx*-1}),$.forEach(r=>{r.dx=.1*e.dx})},render:function(){this.children.forEach(e=>e.render())}})}function Bb(){var $ygur$$interop$default=ba(yb);return $ygur$$interop$default.d.map(e=>{return zb[e.type].makeEntity(e)})}const{canvas:e}=Ga();Ua();const Ea=Ab(),Cb=Pa({update:function(){Ea.update()},render:function(){Ea.render()}});Cb.start();})();