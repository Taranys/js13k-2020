(function () {function ga(a){return a&&a.__esModule?{d:a.default}:{d:a}}let na,Aa,gb={};function Ba(t,...e){(gb[t]||[]).map(t=>t(...e))}function Ca(){return na}function ha(){return Aa}function hb(t){if(!(na=document.getElementById(t)||t||document.querySelector("canvas")))throw Error("You must provide a canvas element for the game");return(Aa=na.getContext("2d")).imageSmoothingEnabled=!1,Ba("init"),{canvas:na,context:Aa}}class ib{constructor({spriteSheet:t,frames:e,frameRate:r,loop:i=!0}){this.spriteSheet=t,this.frames=e,this.frameRate=r,this.loop=i;let{width:$,height:o,margin:s=0}=t.frame;this.width=$,this.height=o,this.margin=s,this._f=0,this._a=0}clone(){return new ib(this)}reset(){this._f=0,this._a=0}update(t=1/60){if(this.loop||this._f!=this.frames.length-1)for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate}render({x:t,y:e,width:r=this.width,height:i=this.height,context:$=ha()}){let o=this.frames[this._f]/this.spriteSheet._f|0,s=this.frames[this._f]%this.spriteSheet._f|0;$.drawImage(this.spriteSheet.image,s*this.width+(2*s+1)*this.margin,o*this.height+(2*o+1)*this.margin,this.width,this.height,t,e,r,i)}}let a=new WeakMap;function jb(t,e){let r=Math.sin(e),i=Math.cos(e);return{x:t.x*i-t.y*r,y:t.x*r+t.y*i}}function ia(t,e,r){return Math.min(Math.max(t,r),e)}function da(t,e){return t.rotation||e.rotation?null:([t,e]=[t,e].map(t=>Da(t)),t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y)}function Da(t){let{x:e,y:r,width:i,height:$}=t.world||t;return t.anchor&&(e-=i*t.anchor.x,r-=$*t.anchor.y),i<0&&(e+=i,i*=-1),$<0&&(r+=$,$*=-1),{x:e,y:r,width:i,height:$}}class X{constructor(t=0,e=0,r={}){this.x=t,this.y=e,r._c&&(this.clamp(r._a,r._b,r._d,r._e),this.x=t,this.y=e)}add(t){return new X(this.x+t.x,this.y+t.y,this)}subtract(t){return new X(this.x-t.x,this.y-t.y,this)}scale(t){return new X(this.x*t,this.y*t)}normalize(t=this.length()){return new X(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}clamp(t,e,r,i){this._c=!0,this._a=t,this._b=e,this._d=r,this._e=i}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?ia(this._a,this._d,t):t}set y(t){this._y=this._c?ia(this._b,this._e,t):t}}function R(){return new X(...arguments)}R.prototype=X.prototype,R.class=X;class kb{constructor(t){return this.init(t)}init(t={}){this.position=R(),this.velocity=R(),this.acceleration=R(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let r=this.velocity;t&&(r=r.scale(t)),this.position=this.position.add(r),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}const ea=()=>{},Ea="position:absolute;left:-9999px";function oa(t,e){let r=e.parentNode;if(t.setAttribute("data-kontra",""),r){let i=r.querySelector("[data-kontra]:last-of-type")||e;r.insertBefore(t,i.nextSibling)}else document.body.appendChild(t)}class pa extends kb{init({width:t=0,height:e=0,context:r=ha(),render:i=this.draw,update:$=this.advance,children:o=[],anchor:s={x:0,y:0},sx:a=0,sy:n=0,opacity:h=1,rotation:w=0,scaleX:p=1,scaleY:l=1,...d}={}){this.children=[],super.init({width:t,height:e,context:r,anchor:s,sx:a,sy:n,opacity:h,rotation:w,scaleX:p,scaleY:l,...d}),this._di=!0,this._uw(),o.map(t=>this.addChild(t)),this._rf=i,this._uf=$}update(t){this._uf(t),this.children.map(t=>t.update&&t.update())}render(t){let e=this.context;e.save(),(this.x||this.y)&&e.translate(this.x,this.y),this.rotation&&e.rotate(this.rotation),(this.sx||this.sy)&&e.translate(-this.sx,-this.sy),1==this.scaleX&&1==this.scaleY||e.scale(this.scaleX,this.scaleY);let r=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(r||i)&&e.translate(r,i),this.context.globalAlpha=this.opacity,this._rf(),(r||i)&&e.translate(-r,-i);let $=this.children;t&&($=$.filter(t)),$.map(t=>t.render&&t.render()),e.restore()}draw(){}_pc(t,e){this._uw(),this.children.map(t=>t._pc())}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:r=1,_wr:i=0,_wsx:$=1,_wsy:o=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=r*this.opacity,this._wr=i+this.rotation;let{x:s,y:a}=jb({x:this.x,y:this.y},i);this._wx=s,this._wy=a,this._wsx=$*this.scaleX,this._wsy=o*this.scaleY,this._wx=this.x*$,this._wy=this.y*o,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}addChild(t,{absolute:e=!1}={}){this.children.push(t),t.parent=this,t._pc=t._pc||ea,t._pc()}removeChild(t){let e=this.children.indexOf(t);-1!==e&&(this.children.splice(e,1),t.parent=null,t._pc())}get opacity(){return this._opa}set opacity(t){this._opa=t,this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}function _(){return new pa(...arguments)}_.prototype=pa.prototype,_.class=pa;class qa extends _.class{init({image:t,width:e=t?t.width:void 0,height:r=t?t.height:void 0,...i}={}){super.init({image:t,width:e,height:r,...i})}get animations(){return this._a}set animations(t){let e,r;for(e in this._a={},t)this._a[e]=t[e].clone(),r=r||this._a[e];this.currentAnimation=r,this.width=this.width||r.width,this.height=this.height||r.height}playAnimation(t){this.currentAnimation=this.animations[t],this.currentAnimation.loop||this.currentAnimation.reset()}advance(t){super.advance(t),this.currentAnimation&&this.currentAnimation.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function S(){return new qa(...arguments)}S.prototype=qa.prototype,S.class=qa;let lb=/(\d+)(\w+)/;function mb(t){let e=t.match(lb),r=+e[1];return{size:r,unit:e[2],computed:r}}class ra extends _.class{init({text:t="",textAlign:e="",lineHeight:r=1,font:i=ha().font,...$}={}){super.init({text:t,textAlign:e,lineHeight:r,font:i,...$}),this._p()}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=mb(t).computed}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}render(){this._d&&this._p(),super.render()}_p(){this._s=[],this._d=!1;let t=this.context;if(t.font=this.font,!this._s.length&&this._fw){let e=this.text.split(" "),r=0,i=2;for(;i<=e.length;i++){let $=e.slice(r,i).join(" ");t.measureText($).width>this._fw&&(this._s.push(e.slice(r,i-1).join(" ")),r=i-1)}this._s.push(e.slice(r,i).join(" "))}if(!this._s.length&&this.text.includes("\n")){let e=0;this.text.split("\n").map(r=>{this._s.push(r),e=Math.max(e,t.measureText(r).width)}),this._w=this._fw||e}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,e=this.textAlign,r=this.context;e=this.textAlign||("rtl"===r.canvas.dir?"right":"left"),t="right"===e?this.width:"center"===e?this.width/2|0:0,this._s.map((i,$)=>{r.textBaseline="top",r.textAlign=e,r.fillStyle=this.color,r.font=this.font,r.fillText(i,t,this._fs*this.lineHeight*$)})}}function Q(){return new ra(...arguments)}Q.prototype=ra.prototype,Q.class=ra;let nb=new WeakMap;function ob(...t){t.map(t=>{let e=t.context?t.context.canvas:Ca(),r=nb.get(e);if(!r)throw new ReferenceError("Pointer events not initialized for the objects canvas");t._r||(t._r=t.render,t.render=function(){r._cf.push(this),this._r()},r._o.push(t))})}class b extends S.class{init({padX:t=0,padY:e=0,text:r,onDown:i,onUp:$,...o}={}){super.init({padX:t,padY:e,...o}),this.textNode=Q({...r,context:this.context}),this.width||(this.width=this.textNode.width,this.height=this.textNode.height),ob(this),this.addChild(this.textNode),this._od=i||ea,this._ou=$||ea;const s=this._dn=document.createElement("button");s.style=Ea,s.textContent=this.text,s.addEventListener("focus",()=>this.focus()),s.addEventListener("blur",()=>this.blur()),s.addEventListener("keydown",t=>this._kd(t)),s.addEventListener("keyup",t=>this._ku(t)),oa(s,this.context.canvas),this._uw(),this._p()}get text(){return this.textNode.text}set text(t){this._d=!0,this.textNode.text=t}destroy(){this._dn.remove()}_p(){this.text!==this._dn.textContent&&(this._dn.textContent=this.text),this.textNode._p();let t=this.textNode.width+2*this.padX,e=this.textNode.height+2*this.padY;this.width=Math.max(t,this.width),this.height=Math.max(e,this.height),this._uw()}render(){this._d&&this._p(),super.render()}enable(){this.disabled=this._dn.disabled=!1,this.onEnable()}disable(){this.disabled=this._dn.disabled=!0,this.onDisable()}focus(){this.disabled||(this.focused=!0,document.activeElement!=this._dn&&this._dn.focus(),this.onFocus())}blur(){this.focused=!1,document.activeElement==this._dn&&this._dn.blur(),this.onBlur()}onOver(){this.disabled||(this.hovered=!0)}onOut(){this.hovered=!1}onEnable(){}onDisable(){}onFocus(){}onBlur(){}onDown(){this.disabled||(this.pressed=!0,this._od())}onUp(){this.disabled||(this.pressed=!1,this._ou())}_kd(t){"Enter"!=t.code&&"Space"!=t.code||this.onDown()}_ku(t){"Enter"!=t.code&&"Space"!=t.code||this.onUp()}}function pb(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}function qb({fps:t=60,clearCanvas:e=!0,update:r=ea,render:i,context:$=ha()}={}){if(!i)throw Error("You must provide a render() function");let o,s,a,n,h,w=0,p=1e3/t,l=1/t,d=e?pb:ea;function c(){if(s=requestAnimationFrame(c),a=performance.now(),n=a-o,o=a,!(n>1e3)){for(Ba("tick"),w+=n;w>=p;)h.update(l),w-=p;d($),h.render()}}return h={update:r,render:i,isStopped:!0,start(){o=performance.now(),this.isStopped=!1,requestAnimationFrame(c)},stop(){this.isStopped=!0,cancelAnimationFrame(s)},_frame:c,set _last(t){o=t}}}let rb={set:(t,e,r)=>(e.startsWith("_")||(t._d=!0),Reflect.set(t,e,r))},Fa={start:t=>t?1:0,center:()=>.5,end:t=>t?0:1};class c extends _.class{init({flow:t="column",align:e="start",justify:r="start",colGap:i=0,rowGap:$=0,numCols:o=1,dir:s="",breakpoints:a=[],...n}={}){return super.init({flow:t,align:e,justify:r,colGap:i,rowGap:$,numCols:o,dir:s,breakpoints:a,...n}),this._p(),new Proxy(this,rb)}addChild(t){this._d=!0,super.addChild(t)}removeChild(t){this._d=!0,super.removeChild(t)}render(){this._d&&this._p(),super.render()}destroy(){this.children.map(t=>t.destroy&&t.destroy())}_p(){this._d=!1,this.breakpoints.map(t=>{t.metric.call(this)&&this._b!==t&&(this._b=t,t.callback.call(this))});let t=this._g=[],e=this._cw=[],r=this._rh=[],i=this.children,$=this._nc="column"===this.flow?1:"row"===this.flow?i.length:this.numCols,o=0,s=0;for(let d,c=0;d=i[c];c++){t[o]=t[o]||[],d._p&&d._p(),r[o]=Math.max(r[o]||0,d.height);let i=d.colSpan||1,a=i;do{e[s]=Math.max(e[s]||0,d.width/a),t[o][s]=d}while(a+s++<=$&&--i);s>=$&&(s=0,o++)}for(;s>0&&s<$;)t[o][s++]=!1;let a=t.length,n=[].concat(this.colGap),h=[].concat(this.rowGap);this._w=e.reduce((t,e)=>t+=e,0);for(let d=0;d<$-1;d++)this._w+=n[d%n.length];this._h=r.reduce((t,e)=>t+=e,0);for(let d=0;d<a-1;d++)this._h+=h[d%h.length];this._uw();let w="rtl"===this.context.canvas.dir&&!this.dir||"rtl"===this.dir;this._rtl=w,w&&(this._g=t.map(t=>t.reverse()),this._cw=e.reverse());let p=-this.anchor.y*this.height,l=[];this._g.map((t,i)=>{let $=-this.anchor.x*this.width;t.map((t,o)=>{if(t&&!l.includes(t)){l.push(t);let s=Fa[t.justifySelf||this.justify](this._rtl),a=Fa[t.alignSelf||this.align](),h=t.colSpan||1,w=e[o];if(h>1&&o+h<=this._nc)for(let t=1;t<h;t++)w+=e[o+t]+n[(o+t)%n.length];let d=w*s,c=r[i]*a,x=0,Y=0,{width:u,height:Z}=t;if(t.anchor&&(x=t.anchor.x,Y=t.anchor.y),0===s)d+=u*x;else if(.5===s){d+=(x<.5?-1:.5===x?0:1)*u*s}else d-=u*(1-x);if(0===a)c+=Z*Y;else if(.5===a){c+=(Y<.5?-1:.5===Y?0:1)*Z*a}else c-=Z*(1-Y);t.x=$+d,t.y=p+c}$+=e[o]+n[o%n.length]}),p+=r[i]+h[i%h.length]})}}let Ga={},sa={},aa={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down"};function sb(t){let e=aa[t.code];sa[e]=!0,Ga[e]&&Ga[e](t)}function tb(t){sa[aa[t.code]]=!1}function ub(){sa={}}function vb(){let t;for(t=0;t<26;t++)aa[t+65]=aa["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)aa[48+t]=aa["Digit"+t]=""+t;window.addEventListener("keydown",sb),window.addEventListener("keyup",tb),window.addEventListener("blur",ub)}function O(t){return!!sa[t]}function Ha(t,e){let r=[],i=e.x+e.width/2,$=e.y+e.height/2,{x:o,y:s,width:a,height:n}=Da(t),h=t.y<$,w=t.y+t.height>=$;return t.x<i&&(h&&r.push(0),w&&r.push(2)),t.x+t.width>=i&&(h&&r.push(1),w&&r.push(3)),r}class wb{constructor({maxDepth:t=3,maxObjects:e=25,bounds:r}={}){this.maxDepth=t,this.maxObjects=e;let i=Ca();this.bounds=r||{x:0,y:0,width:i.width,height:i.height},this._b=!1,this._d=0,this._o=[],this._s=[],this._p=null}clear(){this._s.map(function(t){t.clear()}),this._b=!1,this._o.length=0}get(t){let e=new Set;for(;this._s.length&&this._b;)return Ha(t,this.bounds).map(r=>{this._s[r].get(t).map(t=>e.add(t))}),Array.from(e);return this._o.filter(e=>e!==t)}add(...t){t.map(t=>{Array.isArray(t)?this.add.apply(this,t):this._b?this._a(t):(this._o.push(t),this._o.length>this.maxObjects&&this._d<this.maxDepth&&(this._sp(),this._o.map(t=>this._a(t)),this._o.length=0))})}_a(t){Ha(t,this.bounds).map(e=>{this._s[e].add(t)})}_sp(t,e,r){if(this._b=!0,!this._s.length)for(t=this.bounds.width/2|0,e=this.bounds.height/2|0,r=0;r<4;r++)this._s[r]=new wb({bounds:{x:this.bounds.x+(r%2==1?t:0),y:this.bounds.y+(r>=2?e:0),width:t,height:e},maxDepth:this.maxDepth,maxObjects:this.maxObjects}),this._s[r]._d=this._d+1,this._s[r]._p=this}}function ta(t){let e=[];return t._dn?e.push(t._dn):t.children&&t.children.map(t=>{e=e.concat(ta(t))}),e}class ua extends _.class{init({id:t,name:e=t,cullObjects:r=!0,cullFunction:i=da,...$}){const o=this._dn=document.createElement("section");o.tabIndex=-1,o.style=Ea,o.id=t,o.setAttribute("aria-label",e),super.init({id:t,name:e,cullObjects:r,cullFunction:i,...$}),oa(o,this.context.canvas);let s=this.context.canvas;this.camera=_({x:s.width/2,y:s.height/2,width:s.width,height:s.height,anchor:{x:.5,y:.5}}),this.camera._pc=()=>{super._pc.call(this.camera);this.context.canvas;this.camera._wx=this.camera.x*this.scaleX,this.camera._wy=this.camera.y*this.scaleY}}show(){this.hidden=this._dn.hidden=!1;let t=this.children.find(t=>t.focus);t?t.focus():this._dn.focus(),this.onShow()}hide(){this.hidden=this._dn.hidden=!0,this.onHide()}addChild(t,e){super.addChild(t,e),ta(t).map(t=>{this._dn.appendChild(t)})}removeChild(t){super.removeChild(t),ta(t).map(t=>{oa(t,this.context.canvas)})}destroy(){this._dn.remove(),this.children.map(t=>t.destroy&&t.destroy())}update(t){this.hidden||super.update(t)}lookAt(t){let e=(t=t.world||t).x,r=t.y;t.scaleX&&(e/=t.scaleX,r/=t.scaleY),this.camera.x=e,this.camera.y=r,this._pc()}_pc(){super._pc(),this.camera&&this.camera._pc()}render(){let{x:t,y:e,width:r,height:i}=this.camera;this.sx=t*this.scaleX-r/2,this.sy=e*this.scaleY-i/2,this.hidden||super.render(t=>!this.cullObjects||this.cullFunction(t,this.camera))}onShow(){}onHide(){}}function ba(){return new ua(...arguments)}ba.prototype=ua.prototype,ba.class=ua;const xb=function(){var r,n,t,i,a,e=function(r){return Math.sin(6.283184*r)},o=function(r){return .003959503758*Math.pow(2,(r-128)/12)},f=function(r,n,t){var i,a,e,f,c,h,v,s=u[r.i[0]],p=r.i[1],w=r.i[3],$=u[r.i[4]],M=r.i[5],y=r.i[8],l=r.i[9],d=r.i[10]*r.i[10]*4,g=r.i[11]*r.i[11]*4,A=r.i[12]*r.i[12]*4,x=1/A,C=r.i[13],L=t*Math.pow(2,2-r.i[14]),P=new Int32Array(d+g+A),V=0,I=0;for(i=0,a=0;i<d+g+A;i++,a++)a>=0&&(a-=L,h=o(n+(15&(C=C>>8|(255&C)<<4))+r.i[2]-128),v=o(n+(15&C)+r.i[6]-128)*(1+8e-4*r.i[7])),e=1,i<d?e=i/d:i>=d+g&&(e-=(i-d-g)*x),f=h,w&&(f*=e*e),c=s(V+=f)*p,f=v,y&&(f*=e*e),c+=$(I+=f)*M,l&&(c+=(2*Math.random()-1)*l),P[i]=80*c*e|0;return P},u=[e,function(r){return r%1<.5?1:-1},function(r){return r%1*2-1},function(r){var n=r%1*4;return n<2?n-1:3-n}];this.init=function(e){r=e,n=e.endPattern,t=0,i=e.rowLen*e.patternLen*(n+1)*2,a=new Int32Array(i)},this.generate=function(){var o,c,h,v,s,p,w,$,M,y,l,d,g,A,x=new Int32Array(i),C=r.songData[t],L=r.rowLen,P=r.patternLen,V=0,I=0,m=!1,D=[];for(h=0;h<=n;++h)for(w=C.p[h],v=0;v<P;++v){var U=w?C.c[w-1].f[v]:0;U&&(C.i[U-1]=C.c[w-1].f[v+P]||0,U<16&&(D=[]));var W=u[C.i[15]],b=C.i[16]/512,j=Math.pow(2,C.i[17]-9)/L,k=C.i[18],q=C.i[19],z=43.23529*C.i[20]*3.141592/44100,B=1-C.i[21]/255,E=1e-5*C.i[22],F=C.i[23]/32,G=C.i[24]/512,H=6.283184*Math.pow(2,C.i[25]-9)/L,J=C.i[26]/255,K=C.i[27]*L&-2;for(l=(h*P+v)*L,s=0;s<4;++s)if(p=w?C.c[w-1].n[v+s*P]:0){D[p]||(D[p]=f(C,p,L));var N=D[p];for(c=0,o=2*l;c<N.length;c++,o+=2)x[o]+=N[c]}for(c=0;c<L;c++)(y=x[$=2*(l+c)])||m?(d=z,k&&(d*=W(j*$)*b+.5),I+=(d=1.5*Math.sin(d))*(g=B*(y-I)-(V+=d*I)),y=3==q?I:1==q?g:V,E&&(y=(y*=E)<1?y>-1?e(.25*y):-1:1,y/=E),m=(y*=F)*y>1e-5,A=y*(1-(M=Math.sin(H*$)*G+.5)),y*=M):A=0,$>=K&&(A+=x[$-K+1]*J,y+=x[$-K]*J),x[$]=0|A,x[$+1]=0|y,a[$]+=0|A,a[$+1]+=0|y}return++t/r.numChannels},this.createWave=function(){var r=44+2*i-8,n=r-36,t=new Uint8Array(44+2*i);t.set([82,73,70,70,255&r,r>>8&255,r>>16&255,r>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&n,n>>8&255,n>>16&255,n>>24&255]);for(var e=0,o=44;e<i;++e){var f=a[e];f=f<-32767?-32767:f>32767?32767:f,t[o++]=255&f,t[o++]=f>>8&255}return t},this.getData=function(r,n){for(var t=2*Math.floor(44100*r),i=new Array(n),e=0;e<2*n;e+=1){var o=t+e;i[e]=r>0&&o<a.length?a[o]/32768:0}return i}};const yb={songData:[{i:[0,255,116,1,0,255,116,0,1,0,4,6,35,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],p:[1,1,1,1,1,1],c:[{n:[139,,,,139,,,,139,,,,139,,,,139,,,,139,,,,139,,,,139],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,60,4,10,34,0,0,0,187,5,0,1,239,135,0,32,108,5,130,4],p:[1,1,1,1,1,1],c:[{n:[120,120,,,,,,,120,120,,,,,,,120,120,,,,,,,120,120],f:[]}]},{i:[2,192,128,0,2,192,140,18,0,0,158,59,158,0,0,0,0,0,0,2,5,0,0,32,0,0,24,8],p:[1,2,1,2,1,2],c:[{n:[134,,,,,,,,,,,,,,,,137,,,,,,,,,,,,,,,,139,,,,,,,,,,,,,,,,142,,,,,,,,,,,,,,,,143,,,,,,,,,,,,,,,,146,,,,,,,,,,,,,,,,115,,,,,,,,115,,,,,,,,115,,,,,,,,115],f:[]},{n:[139,,,,,,,,,,,,,,,,134,,,,,,,,,,,,,,,,144,,,,,,,,,,,,,,,,139,,,,,,,,,,,,,,,,148,,,,,,,,,,,,,,,,143,,,,,,,,,,,,,,,,115,,,,,,,,115,,,,,,,,115,,,,,,,,115],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,29,158,158,158,0,0,0,51,2,1,2,58,239,0,32,88,1,157,2],p:[1,1,1,1,1,1],c:[{n:[140,,,,,,,,140,,,,,,,,147,,,,,,,,154],f:[]}]},{i:[0,155,140,0,0,0,140,0,0,0,25,64,63,0,0,3,47,1,1,2,29,98,0,32,88,1,0,2],p:[1,2,,3],c:[{n:[,,,,,,,,,,,,,,139,,,,,,,,,,,,,,146],f:[]},{n:[146,,,144,,,,,,,,,144,,,139,,,,,,,,,143,,,,141],f:[]},{n:[144,,,142,,,,,,,,,144,,,139],f:[]}]},{i:[0,155,140,0,0,0,140,0,0,0,25,190,63,0,0,3,47,1,1,2,29,98,0,32,88,1,13,2],p:[1,2,3,4,,5],c:[{n:[143,,,,,,,,,,,,,,,,146],f:[]},{n:[,,,,144,,,,,,,,,,,,143],f:[]},{n:[143,,,,,,,,,,,,,,,,142],f:[]},{n:[,,,,144,,,,,,,,,,,,139],f:[]},{n:[144,,,,,,,,,,,,,,,,139],f:[]}]},{i:[3,0,128,0,3,68,128,0,1,154,4,5,32,0,0,1,55,4,1,2,17,115,124,190,67,6,230,1],p:[,,1,,,1],c:[{n:[139,,,,,,,,,,,,,,,,139],f:[]}]}],rowLen:13230,patternLen:32,endPattern:5,numChannels:7};const va=new xb;function zb({onStart:e}){const t=Q({text:"Shaman not found",font:"64px Arial",color:"black",x:400,y:200,anchor:{x:.5,y:.5},textAlign:"center"}),r=Q({text:"Loading...",font:"24px Arial",color:"black",x:400,y:500,anchor:{x:.5,y:.5},textAlign:"center"});return ba({isGameStarted:!1,isMusicGenerated:!1,children:[r,t],update:function(){if(this.isMusicGenerated||(this.isMusicGenerated=va.generate()>=1),this.isMusicGenerated&&!this.isGameStarted&&(r.text="Press 'Enter' to start"),!this.isGameStarted&&O("enter")){const t=va.createWave(),r=document.createElement("audio");r.loop=!0,r.src=URL.createObjectURL(new Blob([t],{type:"audio/wav"})),r.volume=.4,r.play(),this.isGameStarted=!0,e()}}})}va.init(yb);function Ab(){const e={x:400,anchor:{x:.5,y:.5},textAlign:"center",color:"black"},n=Q({...e,text:"Credits",font:"64px Arial",y:200}),r=Q({...e,text:"Development: Vincent Poesmann, Yvonnick Frin\n\n    Level design: Lucas Dupuy, Vincent Poesmann\n\n    Music: Thomas Bazin\n\n    Graphism: Yvonnick Frin",font:"24px Arial",y:400});return ba({children:[r,n]})}var Ia={};Ia={run:{frameRate:10,frames:[{headRadius:11,headX:5,headY:7,leftLeg:[2,16],leftKnee:[-3.5,24],leftFoot:[-11,32],leftFootTip:[-7,36],rightLeg:[8,16],rightKnee:[16,24],rightFoot:[8,28],rightFootTip:[12,32],featherRotation:270,featherMovement:2},{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[-1,28],leftFoot:[-9,24],leftFootTip:[-11,28],rightLeg:[8,20],rightKnee:[11,28],rightFoot:[14,36],rightFootTip:[18,34],featherRotation:270,featherMovement:2},{headRadius:11,headX:5,headY:15,leftLeg:[2,22],leftKnee:[2,30],leftFoot:[-6,30],leftFootTip:[-6,34],rightLeg:[8,22],rightKnee:[11,30],rightFoot:[8,38],rightFootTip:[12,38],featherRotation:270,featherMovement:2},{headRadius:11,headX:5,headY:15,leftLeg:[2,22],leftKnee:[5,30],leftFoot:[-3,31],leftFootTip:[-3,35],rightLeg:[8,22],rightKnee:[5,30],rightFoot:[2,38],rightFootTip:[6,38],featherRotation:270}]},fall:{frameRate:10,frames:[{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[10,17],leftFoot:[2,28],leftFootTip:[6,31],rightLeg:[8,20],rightKnee:[16,17],rightFoot:[8,28],rightFootTip:[12,31],cloakRotation:90,featherMovement:2},{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[10,17],leftFoot:[2,28],leftFootTip:[6,31],rightLeg:[8,20],rightKnee:[16,17],rightFoot:[8,28],rightFootTip:[12,31],cloakRotation:90,featherMovement:2},{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[10,17],leftFoot:[2,28],leftFootTip:[6,31],rightLeg:[8,20],rightKnee:[16,17],rightFoot:[8,28],rightFootTip:[12,31],cloakRotation:90,featherMovement:2}]},idle:{frameRate:10,frames:[{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[2,28],leftFoot:[2,36],leftFootTip:[6,36],rightLeg:[8,20],rightKnee:[8,28],rightFoot:[8,36],rightFootTip:[12,36],cloakRotation:280,cloakMovement:0},{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[2,28],leftFoot:[2,36],leftFootTip:[6,36],rightLeg:[8,20],rightKnee:[8,28],rightFoot:[8,36],rightFootTip:[12,35],cloakRotation:280,cloakMovement:0},{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[2,28],leftFoot:[2,36],leftFootTip:[6,36],rightLeg:[8,20],rightKnee:[8,28],rightFoot:[8,36],rightFootTip:[12,36],cloakRotation:280,cloakMovement:0},{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[2,28],leftFoot:[2,36],leftFootTip:[6,36],rightLeg:[8,20],rightKnee:[8,28],rightFoot:[8,36],rightFootTip:[12,36],cloakRotation:280,cloakMovement:0},{headRadius:11,headX:5,headY:11,leftLeg:[2,20],leftKnee:[2,28],leftFoot:[2,36],leftFootTip:[6,36],rightLeg:[8,20],rightKnee:[8,28],rightFoot:[8,36],rightFootTip:[12,36],cloakRotation:280,cloakMovement:0}]},jump:{frameRate:10,frames:[{headRadius:11,headX:5,headY:11,leftLeg:[2,14],leftKnee:[-3.5,22],leftFoot:[-11,33],leftFootTip:[-10,37],rightLeg:[8,20],rightKnee:[2.5,28],rightFoot:[-3,36],rightFootTip:[-2,40],cloakRotation:330,featherRotation:240,featherMovement:2},{headRadius:11,headX:5,headY:11,leftLeg:[2,14],leftKnee:[-3.5,22],leftFoot:[-11,33],leftFootTip:[-10,37],rightLeg:[8,20],rightKnee:[2.5,28],rightFoot:[-3,36],rightFootTip:[-2,40],cloakRotation:330,featherRotation:240,featherMovement:2},{headRadius:11,headX:5,headY:11,leftLeg:[2,14],leftKnee:[-3.5,22],leftFoot:[-11,33],leftFootTip:[-10,37],rightLeg:[8,20],rightKnee:[2.5,28],rightFoot:[-3,36],rightFootTip:[-2,40],cloakRotation:330,featherRotation:240,featherMovement:2}]}};function Ja({headRadius:t,headX:e,headY:o,leftLeg:i,leftKnee:n,leftFoot:h,leftFootTip:a,rightLeg:s,rightKnee:c,rightFoot:x,rightFootTip:l,cloakRotation:r,cloakMovement:d,featherRotation:$,featherMovement:T},f){this.context.beginPath(),this.context.fillStyle="black",this.context.arc(e,o,t,2*Math.PI,!1),this.context.fill(),this.hasInInventory(wa)&&(Cb.bind(this)({headRadius:t,headX:e,headY:o}),Db.bind(this)({headRadius:t,headX:e,headY:o,featherRotation:$,featherMovement:T,frameIndex:f})),this.hasInInventory(ka)&&Bb.bind(this)({headRadius:t,headX:e,headY:o,frameIndex:f,cloakRotation:r,cloakMovement:d}),this.context.beginPath(),this.context.strokeStyle="black",this.context.lineWidth=3,this.context.moveTo(...i),this.context.lineTo(...n),this.context.lineTo(...h),this.context.lineTo(...a),this.context.moveTo(...s),this.context.lineTo(...c),this.context.lineTo(...x),this.context.lineTo(...l),this.context.lineJoin="round",this.context.stroke(),this.hasInInventory(ja)&&(Ka.bind(this)({foot:h,footTip:a}),Ka.bind(this)({foot:x,footTip:l}))}function Bb({headRadius:t,headX:e,headY:o,cloakRotation:i=0,cloakSize:n=20,cloakMovement:h=2,frameIndex:a}){this.context.beginPath(),this.context.fillStyle="#e6de63",this.context.lineJoin="round",this.context.moveTo(e-t-1,o+2),this.context.lineTo(e+t+1,o+2),this.context.lineTo(e-t-1,o+4),this.context.lineTo(e-t-1,o+2),this.context.fill(),this.context.beginPath(),this.context.save(),this.context.translate(e-t-1,o+3),0!==i&&this.context.rotate(Math.PI/180*i),this.context.moveTo(0,-1);const s=a%3;0===s?(this.context.lineTo(-n,0),this.context.lineTo(-n,4),this.context.lineTo(0,1),this.context.lineTo(0,-1)):1===s?(this.context.lineTo(-n,0-h),this.context.lineTo(-n,4-h),this.context.lineTo(0,1),this.context.lineTo(0,-1)):2===s&&(this.context.lineTo(-n,0+h),this.context.lineTo(-n,4+h),this.context.lineTo(0,1),this.context.lineTo(0,-1)),this.context.restore(),this.context.fill()}function Cb({headRadius:t,headX:e,headY:o}){this.context.beginPath(),this.context.fillStyle="#277ae1",this.context.lineJoin="round",this.context.moveTo(e-t-1,o-3),this.context.lineTo(e+t+1,o-3),this.context.lineTo(e+t-2,o-8),this.context.lineTo(e-t+2,o-8),this.context.lineTo(e-t-1,o-3),this.context.fill()}function Db({headRadius:t,headX:e,headY:o,frameIndex:i,featherRotation:n=0,featherMovement:h=0}){this.context.save(),this.context.beginPath(),this.context.fillStyle="white",this.context.lineJoin="miter";const a=e-t+2,s=o-6;this.context.translate(a,s),0!==n&&this.context.rotate(Math.PI/180*n),this.context.moveTo(0,0);const c=i%3;0===c?(this.context.quadraticCurveTo(-4,-7,0,-14),this.context.quadraticCurveTo(4,-7,0,0)):1===c?(this.context.quadraticCurveTo(-4-h,-7,0,-14),this.context.quadraticCurveTo(4-h,-7,0,0)):2===c&&(this.context.quadraticCurveTo(-4+h,-7,0,-14),this.context.quadraticCurveTo(4+h,-7,0,0)),this.context.clip(),this.context.fillRect(-4,-14,8,14),this.context.fillStyle="black",this.context.fillRect(-4,-14,8,4),this.context.restore()}function Ka({foot:t,footTip:e}){this.context.save(),this.context.beginPath(),this.context.strokeStyle="#cc4a38",this.context.lineWidth=3,this.context.moveTo(t[0]-1.5,t[1]),this.context.lineTo(e[0]+.5,e[1]),this.context.lineJoin="round",this.context.stroke(),this.context.restore()}const ja="Boots";const wa="Bandana";const ka="Cloak";const la="Key";const Eb=10,La=4,Ma=.4,Na=.1,xa=.5,Oa=.1,Fb=.05,Gb=8,Hb=20,Ib=10,Pa=4,Jb=15,ca=.6,Kb=.2;function Lb({onPick:i,textManager:a}){var $uesm$$interop$default=ga(Ia);return S({group:2,zIndex:3,anchor:{x:.5,y:.5},x:-1434,y:423,width:10,height:112/3,dx:0,inventory:[],hasInInventory:function(i){return-1!==this.inventory.findIndex(a=>a===i)},addToInventory:function(a){this.inventory.push(a),i(a)},removeFromInventory:function(i){const a=this.inventory.findIndex(a=>a===i);this.inventory.splice(a,1)},_a:0,_f:0,_currentAnimation:"run",_availableAnimations:$uesm$$interop$default.d,playCanvasAnimation:function(i){i!==this._currentAnimation&&(this._f=0,this._a=0,this._currentAnimation=i)},jumpFrames:0,isGrounded:!1,isJumping:!1,stillJumping:!1,hasDoubleJump:!1,isSliding:!1,render:function(){let i=this._availableAnimations[this._currentAnimation].frames[this._f];Ja.bind(this)(i,this._f)},updateAnimation:function(i=1/60){this._a+=i;const a=this._availableAnimations[this._currentAnimation];for(;this._a*a.frameRate>=1;)this._f=++this._f%a.frames.length,this._a-=1/a.frameRate},isPerformingJump:function(){return this.jumpFrames<Pa&&O("space")},isStillAscending:function(){return this.isJumping&&(this.jumpFrames<Pa||this.jumpFrames<Jb&&this.stillJumping)},canDoubleJump:function(){return!this.stillJumping&&this.hasDoubleJump},isBreakingFall:function(){return this.dy>ca&&O("space")},handleJump:function(){this.isPerformingJump()&&(this.isJumping=!0,this.stillJumping=!0),this.isStillAscending()&&(this.dy=-Gb),O("space")||(this.stillJumping=!1),this.isGrounded||this.jumpFrames++,this.isBreakingFall()&&(this.canDoubleJump()&&this.hasInInventory(ja)?(this.dy=-Ib,this.hasDoubleJump=!1):this.hasInInventory(ka)&&(this.dy=Kb)),this.isGrounded=!1},handleMovement:function(){O("a")?this.ddx=this.isSliding?-Na:-Ma:O("d")?this.ddx=this.isSliding?Na:Ma:this.isSliding?Math.abs(this.dx)<=xa?this.ddx=0:this.ddx=Fb*-Math.sign(this.dx):this.isGrounded?Math.abs(this.dx)<=xa?(this.dx=0,this.ddx=0):this.ddx=xa*-Math.sign(this.dx):Math.abs(this.dx)<=Oa?(this.dx=0,this.ddx=0):this.ddx=Oa*-Math.sign(this.dx),this.isSliding=!1,this.dx=ia(-La,La,this.dx),this.dy=ia(-Hb,Eb,this.dy)},update:function(i){if(this.updateAnimation(i),this.advance(),this.ddy=ca,O("d")||O("a")||this.dy!==ca?this.dy===ca?this.playCanvasAnimation("run"):this.dy<ca?this.playCanvasAnimation("jump"):this.dy>ca&&this.playCanvasAnimation("fall"):this.playCanvasAnimation("idle"),a.isTextDisplayed())return this.dx=0,void(this.ddx=0);this.handleMovement(),this.handleJump(),this.dx>0?this.scaleX=1:this.dx<0&&(this.scaleX=-1);this.children[0]},touchesGround:function(){this.isGrounded=!0,this.hasDoubleJump=!0,this.jumpFrames=0,this.isJumping=!1},bounce:function(){this.dy=-1.2*this.dy-8},slide:function(){this.isSliding=!0}})}var Qa={};function Mb(){this.context.beginPath(),this.context.fillStyle=this.color,this.context.rect(0,-2,this.width,this.height),this.context.fill()}Qa.render=Mb;var Ra={};function Nb(){this.context.beginPath(),this.context.fillStyle="#277ae1",this.context.rect(0,-2,this.width,this.height),this.context.fill(),this.context.beginPath(),this.context.fillStyle="#cc4a38",this.context.moveTo(0,-2),this.context.lineTo(0,this.height-2),this.context.lineTo(5,(this.height-2)/2),this.context.lineTo(0,-2),this.context.moveTo(this.width,-2),this.context.lineTo(this.width,this.height-2),this.context.lineTo(this.width-5,(this.height-2)/2),this.context.lineTo(this.width,-2),this.context.fill()}Ra.render=Nb;var Sa={};function Ob(){this.context.beginPath(),this.context.fillStyle="#cc4a38",this.context.rect(0,-2,this.width,this.height),this.context.fill(),this.context.beginPath(),this.context.strokeStyle="#e6de63",this.context.lineWidth=2,this.context.moveTo(0,-2),this.context.lineTo(0,this.height-2),this.context.moveTo(5,-2),this.context.lineTo(5,this.height-2),this.context.moveTo(this.width,-2),this.context.lineTo(this.width,this.height-2),this.context.moveTo(this.width-5,-2),this.context.lineTo(this.width-5,this.height-2),this.context.stroke()}Sa.render=Ob;var ya={};function Pb(){this.context.beginPath(),this.context.fillStyle="#e6de63",this.context.rect(0,-2,this.width,this.height),this.context.fill(),this.context.beginPath(),this.context.strokeStyle="#277ae1",this.context.lineWidth=2,this.context.arc(0,this.height/2-2,(this.height-2)/2,1.5*Math.PI,2.5*Math.PI,!1),this.context.moveTo(this.width,this.height-2),this.context.arc(this.width,this.height/2-2,(this.height-2)/2,2.5*Math.PI,1.5*Math.PI,!1),this.context.stroke()}function Qb(t=1/60){!0===this.isFading&&(Number(this._a)||(this._a=0),this._a++,this._a/60>1&&(this.opacity=0),this._a/60>6&&(this.opacity=1,this._a=0,this.isFading=!1))}ya.render=Pb,ya.update=Qb;var Ta={};function Rb(){this.context.beginPath(),this.context.filter=`blur(${this.blur}px)`;const t=new Path2D;t.arc(this.foliageRadius,this.foliageRadius,this.foliageRadius,0,2*Math.PI),this.context.fillStyle=this.foliageComputedColor,this.context.fill(t),this.context.fillStyle=this.trunkComputedColor,this.context.fillRect(this.foliageRadius-this.trunkWidth/2,this.foliageRadius,this.trunkWidth,this.trunkHeight)}Ta.render=Rb;var Ua={};function Sb(){const t=Math.round(this.height/2),e=this.height;this.width=2*e+t,this.context.beginPath(),this.context.filter=`blur(${this.blur}px)`,this.context.fillStyle=this.foliageShadowComputedColor;const h=new Path2D;h.arc(t,e,t,0,Math.PI,!0),this.context.fill(h),this.context.fillStyle=this.foliageComputedColor;const i=new Path2D;i.arc(e+t,e,e,0,Math.PI,!0),this.context.fill(i)}Ua.render=Sb;var Va={};function Tb(){this.context.fillStyle=this.computedColor,this.context.beginPath(),this.context.filter=`blur(${this.blur}px)`,this.context.moveTo(-this.width/2,this.hillHeight-this.height),this.context.quadraticCurveTo(this.hillWidth/2-this.width/2,-this.height,this.hillWidth-this.width/2,this.hillHeight-this.height),this.context.fill()}Va.render=Tb;var Wa={};function Ub(){this.context.beginPath(),this.context.fillStyle=this.computedColor,this.context.rect(0,0,this.width,this.height),this.context.fill()}Wa.render=Ub;var Xa={};function Vb(){this.context.beginPath(),this.context.filter=`blur(${this.blur}px)`,this.context.fillStyle=this.computedColor,this.context.rect(0,0,this.width,this.height),this.context.fill()}Xa.render=Vb;var Ya={};function Wb(){this.context.beginPath();const t=this.context.createLinearGradient(0,this.height,0,0);t.addColorStop(0,this.lightColor),t.addColorStop(1,this.color),this.context.fillStyle=t,this.context.fillRect(0,0,this.width,this.height)}Ya.render=Wb;var Za={};function Xb(){this.context.beginPath(),this.context.strokeStyle=this.color,this.context.lineWidth=3,this.context.arc(this.width-this.keyRadius,this.keyRadius,this.keyRadius,0,2*Math.PI,!1),this.context.moveTo(this.width-2*this.keyRadius+2,2*this.keyRadius-2),this.context.lineTo(0,this.height),this.context.moveTo(4,this.height-4),this.context.lineTo(8,this.height),this.context.stroke()}Za.render=Xb;var $a={};function Yb(){const t=this.height/3*2,h=this.height/3;this.context.beginPath(),this.context.fillStyle="#a5764c",this.context.rect(0,h,this.width,t),this.context.fill(),this.context.beginPath(),this.context.save();const e=new Path2D;this.opened?(this.context.translate(this.width,0),this.context.rotate(Math.PI/180*270),e.arc(h/2,0,this.width/2,0,Math.PI,!1)):(this.context.translate(this.width/2,0),this.context.rotate(Math.PI/180*180),e.arc(0,-h-1,this.width/2,0,Math.PI,!1)),this.context.fill(e),this.context.restore()}$a.render=Yb;var _a={};function Zb(){this.context.beginPath(),this.context.fillStyle=this.computedColor;const t=this.width/6,i=this.width/2-t/2,e=this.height/8;this.context.save(),this.context.moveTo(i,0),this.context.lineTo(i+t,0),this.context.lineTo(this.width/2,e),this.context.lineTo(i,0),this.context.clip(),this.context.fillRect(0,0,this.width,e),this.context.fillStyle=this.patternComputedColor,this.context.fillRect(0,0,this.width,e/2),this.context.restore(),this.context.beginPath(),this.context.save(),this.context.fillStyle=this.computedColor,this.context.moveTo(this.width/2,e),this.context.lineTo(this.width,this.height),this.context.lineTo(0,this.height),this.context.lineTo(this.width/2,e),this.context.clip(),this.context.fillRect(0,e,this.width,this.height),this.context.fillStyle=this.patternComputedColor,this.context.fillRect(0,this.height-e,this.width,this.height),this.context.restore()}_a.render=Zb;function ab(){this.context.beginPath(),this.context.fillStyle="#582900";const t=this.height/3*2,i=this.width/4;this.context.translate(-this.width/3,0),this.context.moveTo(0,0),this.context.lineTo(i,0+t),this.context.lineTo(i+2*i,0+t),this.context.lineTo(this.width,0),this.context.lineTo(0,0),this.context.fill(),this.context.beginPath(),this.context.fillStyle="#fffeb5",this.context.strokeStyle="#a5764c",this.context.lineWidth=1.5,this.context.moveTo(i-10,5),this.context.lineTo(i-5,10),this.context.lineTo(i,10),this.context.lineTo(i+5,5),this.context.lineTo(i-10,5),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.context.fillStyle="#fffeb5",this.context.strokeStyle="#a5764c",this.context.lineWidth=1.5,this.context.moveTo(3*i-5,5),this.context.lineTo(3*i,10),this.context.lineTo(3*i+5,10),this.context.lineTo(3*i+10,5),this.context.lineTo(3*i-5,5),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.context.fillStyle="white",this.context.strokeStyle="#a5764c",this.context.lineWidth=1.5,this.context.arc(2*i,0+t/3*2,4,0,2*Math.PI,!1),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.context.fillStyle="#ff6961";this.context.moveTo(5,0),this.context.quadraticCurveTo(-1,-7,5,-20),this.context.quadraticCurveTo(11,-7,5,0),this.context.fill(),this.context.beginPath(),this.context.fillStyle="#77B5FE";const e=2*i;this.context.moveTo(e,0),this.context.quadraticCurveTo(e-6,-7,e,-20),this.context.quadraticCurveTo(e+6,-7,e,0),this.context.fill(),this.context.beginPath(),this.context.fillStyle="#FDFD69";const o=this.width-5;this.context.moveTo(o,0),this.context.quadraticCurveTo(o-6,-7,o,-20),this.context.quadraticCurveTo(o+6,-7,o,0),this.context.fill()}function $b(){this.hasInInventory=()=>!1;var $uesm$$interop$default=ga(Ia);const t=$uesm$$interop$default.d.idle.frames[0];Ja.bind(this)(t),ab.bind(this)()}function _b(){this.context.beginPath(),this.context.fillStyle="#c5e9b1",this.context.strokeStyle="#daffc5",this.context.lineWidth=15,this.context.arc(this.width/7,0,this.width,0,2*Math.PI,!1),this.context.fill(),this.context.stroke(),ab.bind(this)()}function ac(r,e){return r.group<e.group?1:r.group>e.group?-1:r.zIndex<e.zIndex?1:r.zIndex>e.zIndex?-1:0}function bc(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}const bb=20;class cc{constructor(){bc(this,"didCollide",!1)}update(e,o){const r=eb(e);r.advance();let t=!1;if(o.forEach(o=>{if(0!==o.opacity&&da(r,o))if(t=!0,hc(e,o))ic(e,o)?fa(e,o):za(e,o);else if(jc(e,o)){const t=fc(e,r,o),$=dc(e,r,o);t<=o.y?fa(e,o):$>o.y+o.height?za(e,o):e.isGrounded&&db(e,o)?cb(e,o):lc(e,o)}else{const t=gc(e,r,o),$=ec(e,r,o);t<=o.y?fa(e,o):$>o.y+o.height?za(e,o):e.isGrounded&&db(e,o)?cb(e,o):mc(e,o)}}),!t&&this.didCollide&&e.dy>0){const r=eb(e);r.dy=bb,r.advance();const t=o.filter(e=>da(r,e));if(!t.length)return;const $=t.reduce((e,o)=>o.y>e.y?o:e,t[0]);kc(e,$)}this.didCollide=t}}function dc(e,o,r){return ma({xa:e.x-e.width/2,ya:e.y-e.height/2},{xb:o.x-o.width/2,yb:o.y-o.height/2},r.x+r.width)}function ec(e,o,r){return ma({xa:e.x+e.width/2,ya:e.y-e.height/2},{xb:o.x+o.width/2,yb:o.y-o.height/2},r.x)}function fc(e,o,r){return ma({xa:e.x-e.width/2,ya:e.y+e.height/2},{xb:o.x-o.width/2,yb:o.y+o.height/2},r.x+r.width)}function gc(e,o,r){return ma({xa:e.x+e.width/2,ya:e.y+e.height/2},{xb:o.x+o.width/2,yb:o.y+o.height/2},r.x)}function ma({xa:e,ya:o},{xb:r,yb:t},$){const i=(t-o)/(r-e);return i*$+(o-i*e)}function hc(e,o){return e.x+e.width/2>o.x&&e.x-e.width/2<o.x+o.width}function ic(e,o){return e.y-e.height/2<o.y}function jc(e,o){return e.x-e.width/2>=o.x+o.width}function fa(e,o){e.touchesGround(),"Bounce"===o.type?e.bounce():(e.dy=0,"Slide"===o.type?e.slide():"Fade"===o.type&&(o.isFading=!0)),e.y=o.y-e.height/2}function cb(e,o){fa(e,o)}function kc(e,o){fa(e,o)}function za(e,o){e.y=o.y+o.height+e.height/2,e.dy=0}function lc(e,o){e.x=o.x+o.width+e.width/2,e.dx=0,e.ddx=0}function mc(e,o){e.x=o.x-e.width/2,e.dx=0,e.ddx=0}function db(e,o){return o.y>e.y+e.height/2-bb}function eb(e){const o=new S({...e});return o.position=R(e.position.x,e.position.y),o.velocity=R(e.velocity.x,e.velocity.y),o.acceleration=R(e.acceleration.x,e.acceleration.y),o}const nc="Chest";const oc={[ja]:"You can double jump!",[wa]:"You look nice!",[ka]:"You can glide!"};class pc{constructor(t){this.textManager=t}update(t,$,{removeObject:e}){$.forEach($=>{da(t,$)&&($.type===la?(t.addToInventory(la),e($)):$.type===nc&&!$.opened&&t.hasInInventory(la)&&(t.removeFromInventory(la),t.addToInventory($.content),$.opened=!0,this.textManager.displayText(oc[$.content])))})}}function qc(){const t={group:0,x:210,width:380,height:60,color:"black"},e=Q({...t,text:"",font:"18px Arial",y:485,textAlign:"center"}),i=Q({...t,group:0,text:"Press 'Enter' to continue",font:"14px Arial",y:555,textAlign:"right"}),h=S({x:400,y:200,width:32,height:32,opacity:.5,render:_b}),r=ba({text:"",cullObjects:!1,width:800,height:600,hasPressedEnter:!1,isTextDisplayed:function(){return""!==this.text},displayText:function(t,e,i){this.text=t,this.callback=e,this.hideShaman=i,this.children[1].opacity=1,this.show()},update:function(){if(this.x=this.parent.camera.x-this.width/2,this.y=this.parent.camera.y-this.height/2,this.children[0].text=this.text,O("enter"))this.hasPressedEnter=!0;else if(this.hasPressedEnter&&!O("enter")&&(this.hasPressedEnter=!1,this.text="",this.children[1].opacity=0,this.hide(),this.callback)){const t=this.callback;this.callback=null,t()}},render:function(){this.text&&(this.hideShaman&&(this.children[2].opacity=0),this.context.beginPath(),this.context.fillStyle="white",this.context.strokeStyle="black",this.context.lineWidth=2,this.context.rect(200,475,400,100),this.context.fill(),this.context.stroke())},children:[e,i,h]});return r.hide(),r}var rc={};rc=[{x:-3e3,y:500,a:3200,b:200,c:"#0",e:2,f:5,t:"D"},{x:-2500,y:-2500,a:7e3,b:4200,c:"#1",e:4,f:1,q:"#2",t:"I"},{x:-2660,y:-2e3,a:500,b:2500,c:"#3",e:2,f:6,t:"D"},{x:2882,y:-619,a:200,b:200,c:"pink",e:2,f:1,t:"End"},{x:-500,y:486,a:110,b:15,c:"#0",e:2,f:1,t:"D"},{x:-400,y:471,a:110,b:30,c:"#0",e:2,f:1,t:"D"},{x:-300,y:456,a:410,b:45,c:"#0",e:2,f:1,t:"D"},{x:100,y:200,a:500,b:300,c:"#0",e:2,f:1,t:"D"},{x:60,y:420,a:60,b:60,c:"#0",e:2,f:1,t:"D"},{x:-280,y:380,a:60,b:20,c:"#4",e:2,f:1,t:"D"},{x:-380,y:290,a:60,b:20,c:"#4",e:2,f:1,t:"D"},{x:-500,y:200,a:90,b:20,c:"#4",e:2,f:1,t:"D"},{x:-530,y:190,a:40,b:30,c:"#4",e:2,f:1,t:"D"},{x:-560,y:180,a:40,b:40,c:"#4",e:2,f:1,t:"D"},{x:-701,y:170,a:142,b:50,c:"#4",e:2,f:1,t:"D"},{x:-720,y:-50,a:20,b:270,c:"#4",e:2,f:1,t:"D"},{x:-430,y:-50,a:20,b:180,c:"#4",e:2,f:1,t:"D"},{x:-684,y:139,a:20,b:20,c:"gray",e:2,f:1,r:5,t:"F"},{x:-726,y:-100,a:20,b:20,c:"gray",e:2,f:1,r:5,t:"F"},{x:-730,y:-70,a:330,b:20,e:2,f:1,t:"J"},{x:-700,y:-85,a:270,b:16,e:2,f:1,t:"J"},{x:-581,y:470,content:"Boots",a:30,b:30,e:2,f:4,t:"C"},{x:80,y:410,a:20,b:11,e:2,f:2,t:"A"},{x:590,y:219,a:100,b:260,c:"#0",e:2,f:1,t:"D"},{x:590,y:470,a:40,b:20,c:"#0",e:2,f:1,t:"D"},{x:630,y:188,content:"Bandana",a:30,b:30,e:2,f:4,t:"C"},{x:850,y:1450,a:500,b:300,c:"#0",e:2,f:1,t:"D"},{x:1340,y:1431,a:200,b:319,c:"#0",e:2,f:1,t:"D"},{x:1530,y:1419,a:80,b:331,c:"#0",e:2,f:1,t:"D"},{x:1600,y:1412,a:50,b:338,c:"#0",e:2,f:1,t:"D"},{x:1640,y:1408,a:30,b:342,c:"#0",e:2,f:1,t:"D"},{x:1660,y:1406,a:200,b:344,c:"#0",e:2,f:1,t:"D"},{x:650,y:1500,a:210,b:550,c:"#0",e:2,f:1,t:"D"},{x:651,y:1490,a:198,b:11,e:2,f:1,t:"J"},{x:400,y:1550,a:260,b:500,c:"#0",e:2,f:1,t:"D"},{x:250,y:1700,a:160,b:550,c:"#0",e:2,f:2,t:"D"},{x:401,y:1540,a:248,b:11,e:2,f:1,t:"J"},{x:260,y:1690,a:140,b:11,e:2,f:1,t:"J"},{x:150,y:1660,a:110,b:590,c:"#5",e:2,f:1,t:"D"},{x:-50,y:1630,a:210,b:510,c:"#5",e:2,f:1,t:"D"},{x:-180,y:1800,a:140,b:510,c:"#5",e:2,f:1,t:"D"},{x:-270,y:1700,a:100,b:500,c:"#5",e:2,f:1,t:"D"},{x:-269,y:1690,a:98,b:11,e:2,f:1,t:"J"},{x:-170,y:1790,a:120,b:11,e:2,f:1,t:"J"},{x:-340,y:1900,a:80,b:510,c:"#5",e:2,f:1,t:"D"},{x:-530,y:1650,a:200,b:500,c:"#5",e:2,f:1,t:"D"},{x:-529,y:1640,a:198,b:11,e:2,f:1,t:"J"},{x:-750,y:1850,a:230,b:500,c:"#5",e:2,f:1,t:"D"},{x:-900,y:1600,a:160,b:510,c:"#5",e:2,f:1,t:"D"},{x:-899,y:1590,a:158,b:11,e:2,f:1,t:"J"},{x:-1e3,y:1800,a:110,b:510,c:"#5",e:2,f:1,t:"D"},{x:-1030,y:1450,a:40,b:800,c:"#5",e:2,f:1,t:"D"},{x:-1230,y:1660,a:210,b:510,c:"#5",e:2,f:1,t:"D"},{x:-1350,y:1370,a:130,b:710,c:"#5",e:2,f:1,t:"D"},{x:-1800,y:700,a:460,b:1400,c:"#5",e:2,f:1,t:"D"},{x:-1029,y:1440,a:38,b:11,e:2,f:1,t:"J"},{x:-989,y:1790,a:88,b:11,e:2,f:1,t:"J"},{x:-1219,y:1650,a:188,b:11,e:2,f:1,t:"J"},{x:-1330,y:1340,a:20,b:20,c:"gray",e:2,f:1,r:5,t:"F"},{x:446,y:490,a:100,b:25,c:"#0",e:2,f:1,t:"D"},{x:280,y:490,a:180,b:55,c:"#0",e:2,f:1,t:"D"},{x:100,y:490,a:190,b:120,c:"#0",e:2,f:1,t:"D"},{x:1850,y:800,a:150,b:1e3,c:"#5",e:2,f:1,t:"D"},{x:1850,y:95,a:150,b:500,c:"#5",e:2,f:1,t:"D"},{x:1620,y:1200,a:50,b:50,c:"#5",e:2,f:1,t:"D"},{x:1580,y:1185,a:50,b:65,c:"#5",e:2,f:1,t:"D"},{x:1540,y:1170,a:50,b:80,c:"#5",e:2,f:1,t:"D"},{x:1500,y:1155,a:50,b:95,c:"#5",e:2,f:1,t:"D"},{x:1200,y:1100,a:100,b:10,e:2,f:1,t:"J"},{x:1220,y:-3e3,a:60,b:5e3,d:"#6",e:2,f:8,t:"H"},{x:920,y:-3e3,a:120,b:4500,d:"#6",e:2,f:8,t:"H"},{x:1380,y:-3e3,a:90,b:5e3,d:"#6",e:2,f:8,t:"H"},{x:1370,y:1050,a:80,b:10,e:2,f:1,t:"J"},{x:950,y:1e3,a:60,b:10,e:2,f:1,t:"J"},{x:1e3,y:800,a:50,b:10,e:2,f:1,t:"J"},{x:1200,y:740,a:100,b:10,e:2,f:1,t:"J"},{x:910,y:880,a:50,b:10,e:2,f:1,t:"J"},{x:930,y:380,a:130,b:10,e:2,f:1,t:"J"},{x:1250,y:480,a:50,b:10,e:2,f:1,t:"J"},{x:1440,y:600,a:40,b:10,e:2,f:1,t:"J"},{x:1370,y:680,a:110,b:10,e:2,f:1,t:"J"},{x:690,y:219,a:50,b:10,e:2,f:1,t:"A"},{x:350,y:-150,a:300,b:20,c:"#4",e:2,f:1,t:"D"},{x:425,y:-165,a:150,b:20,c:"#4",e:2,f:1,t:"D"},{x:485,y:-195,content:"Cloak",a:30,b:30,e:2,f:1,t:"C"},{x:0,y:-120,a:100,b:10,e:2,f:1,t:"A"},{x:1850,y:-170,a:150,b:20,c:"#0",e:2,f:1,t:"D"},{x:2e3,y:100,a:100,b:16,e:2,f:1,t:"L"},{x:2232,y:132,a:100,b:16,e:2,f:1,t:"L"},{x:2090,y:116,a:150,b:16,e:2,f:1,t:"L"},{x:2328,y:116,a:150,b:16,e:2,f:1,t:"L"},{x:1990,y:790,a:700,b:1e3,c:"#5",e:2,f:1,t:"D"},{x:2640,y:95,a:560,b:1e3,c:"#5",e:2,f:1,t:"D"},{x:1800,y:800,a:50,b:15,e:2,f:1,t:"A"},{x:1410,y:312,a:100,b:10,e:2,f:1,t:"A"},{x:2790,y:85,a:70,b:11,e:2,f:1,t:"A"},{x:2660,y:85,a:100,b:50,c:"#5",e:2,f:1,t:"D"},{x:2700,y:75,a:50,b:50,c:"#5",e:2,f:1,t:"D"},{x:2740,y:65,a:50,b:60,c:"#5",e:2,f:1,t:"D"},{x:2860,y:-200,a:40,b:500,c:"#5",e:2,f:1,t:"D"},{x:2474,y:100,a:166,b:16,e:2,f:1,t:"L"},{x:1950,y:-170,a:110,b:40,c:"#0",e:2,f:1,t:"D"},{x:2050,y:-170,a:100,b:80,c:"#0",e:2,f:1,t:"D"},{x:1900,y:-180,a:100,b:11,e:2,f:1,t:"A"},{x:1850,y:-450,a:40,b:10,e:2,f:1,t:"J"},{x:2100,y:-420,a:1010,b:40,c:"#0",e:2,f:1,t:"D"},{x:2740,y:-250,a:50,b:10,e:2,f:1,t:"J"},{x:2640,y:-280,a:60,b:16,e:2,f:1,t:"L"},{x:2640,y:-340,a:60,b:16,e:2,f:1,t:"L"},{x:2700,y:-340,a:20,b:100,c:"#5",e:2,f:1,t:"D"},{x:2620,y:-380,a:20,b:116,c:"#5",e:2,f:1,t:"D"},{x:2140,y:-150,a:60,b:10,c:"#0",e:2,f:1,t:"D"},{x:2400,y:-200,a:60,b:10,e:2,f:1,t:"J"},{x:2100,y:-497,a:200,b:90,c:"#0",e:2,f:1,t:"D"},{x:2280,y:-480,a:100,b:80,c:"#0",e:2,f:1,t:"D"},{x:2370,y:-470,a:100,b:70,c:"#0",e:2,f:1,t:"D"},{x:2460,y:-460,a:100,b:60,c:"#0",e:2,f:1,t:"D"},{x:2550,y:-450,a:100,b:50,c:"#0",e:2,f:1,t:"D"},{x:2640,y:-440,a:100,b:40,c:"#0",e:2,f:1,t:"D"},{x:2730,y:-430,a:100,b:30,c:"#0",e:2,f:1,t:"D"},{x:2890,y:-381,a:1e3,b:1e3,c:"#5",e:2,f:1,t:"D"},{x:3100,y:-1e3,a:1e3,b:1e3,c:"#0",e:2,f:2,t:"D"},{x:-615,y:-900,a:100,b:1500,d:"#6",e:2,f:8,t:"H"},{x:450,y:-1500,a:100,b:1800,d:"#6",e:2,f:8,t:"H"},{x:-708,y:-53,a:298,b:270,d:"#7",e:2,f:9,t:"G"},{x:10,y:-1500,a:80,b:2e3,d:"#6",e:2,f:8,t:"H"},{x:-1724,y:337,a:150,b:200,d:"#8",e:2,f:1,s:"#9",t:"M"},{x:-3723,y:399,a:175,b:250,d:"#10",e:1,f:1,s:"#11",t:"M"},{x:-1328,y:280,a:125,b:175,d:"#12",e:3,f:1,s:"#13",t:"M"},{x:-1450,y:425,a:300,b:75,d:"#14",e:3,f:2,n:600,o:150,t:"E"},{x:-1401,y:-1551,a:100,b:2e3,d:"#15",e:3,f:3,t:"H"},{x:-1101,y:452,b:50,e:2,f:2,h:-1,j:"#16",p:"#17",t:"B"},{x:-1159,y:394,b:50,e:3,f:2,h:-1,j:"#18",p:"#19",t:"B"},{x:-1736,y:385,a:50,b:125,e:2,f:6,i:25,j:"#0",k:5,l:100,m:"#20",t:"K"},{x:-1460,y:327,a:50,b:125,e:3,f:1,i:25,j:"#14",k:5,l:100,m:"#21",t:"K"},{x:-3507,y:505,a:50,b:125,e:1,f:1,g:1,i:25,j:"#22",k:5,l:100,m:"#23",t:"K"},{x:-831,y:398,a:50,b:125,e:2,f:8,i:25,j:"#0",k:5,l:100,m:"#20",t:"K"},{x:-2695,y:-1637,a:50,b:2250,d:"#24",e:1,f:3,g:1,t:"H"},{x:-2818,y:547,a:250,b:100,d:"#22",e:1,f:2,g:1,n:500,o:200,t:"E"},{x:-2795,y:525,b:50,e:1,f:1,g:1,j:"#25",p:"#26",t:"B"},{x:-824,y:-1500,a:50,b:2e3,d:"#15",e:3,f:1,t:"H"},{x:-454,y:422,a:400,b:100,d:"#14",e:3,f:1,n:800,o:200,t:"E"},{x:-354,y:298,a:10,b:300,d:"#27",e:2,f:8,t:"G"},{x:-255,y:396,a:10,b:100,d:"#27",e:2,f:8,t:"G"},{x:-154,y:-1532,a:70,b:2e3,d:"#15",e:3,f:2,t:"H"},{x:-378,y:207,a:100,b:250,e:3,f:2,i:50,j:"#14",k:5,l:200,m:"#21",t:"K"},{x:-1643,y:461,a:500,b:50,d:"#14",e:3,f:1,n:1e3,o:100,t:"E"},{x:1535,y:1254,a:100,b:200,d:"#28",e:2,f:8,t:"G"},{x:1523,y:1212,a:120,b:50,d:"#28",e:2,f:2,t:"G"},{x:-1389,y:670,a:1500,b:1500,d:"#28",e:4,f:1,t:"G"},{x:90,y:687,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:105,y:1600,a:50,b:1e3,d:"#28",e:4,f:1,t:"G"},{x:148,y:1622,a:50,b:70,d:"#28",e:4,f:1,t:"G"},{x:248,y:1725,a:50,b:300,d:"#5",e:2,f:1,t:"G"},{x:273,y:1769,a:120,b:300,d:"#5",e:2,f:1,t:"G"},{x:373,y:1814,a:70,b:100,d:"#5",e:2,f:1,t:"G"},{x:1860,y:-2160,a:20,b:2e3,d:"#6",e:2,f:2,t:"H"},{x:1991,y:-141,a:1e3,b:1e3,d:"#28",e:4,f:1,t:"G"},{x:2137,y:-401,a:1e3,b:300,d:"#28",e:4,f:1,t:"G"},{x:1954,y:583,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:1898,y:780,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:1944,y:749,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:1915,y:564,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:1954,y:69,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:1970,y:-149,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:1985,y:-40,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:2122,y:-414,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:2104,y:-192,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:2128,y:-205,a:50,b:50,d:"#28",e:4,f:1,t:"G"},{x:1818,y:1452,a:50,b:50,d:"#5",e:2,f:1,t:"G"},{x:1715,y:1476,a:150,b:50,d:"#5",e:2,f:1,t:"G"},{x:1693,y:1509,a:200,b:50,d:"#5",e:2,f:1,t:"G"},{x:1652,y:1551,a:200,b:50,d:"#5",e:2,f:1,t:"G"},{x:-1153,y:1720,a:1300,b:500,d:"#29",e:3,f:1,t:"G"},{x:-1185,y:1600,a:300,b:300,d:"#29",e:3,f:1,t:"G"},{x:-260,y:1599,a:200,b:300,d:"#29",e:3,f:1,t:"G"},{x:-1936,y:1425,a:50,b:700,d:"#30",e:1,f:1,t:"G"},{x:-1100,y:1466,a:120,b:700,d:"#30",e:1,f:1,t:"G"},{x:630,y:-1502,a:100,b:"q3500",d:"#15",e:3,f:1,t:"H"},{x:1511,y:-1471,a:120,b:3e3,d:"#15",e:3,f:1,t:"H"},{x:2418,y:-2006,a:100,b:1600,d:"#6",e:2,f:8,t:"H"},{x:2593,y:-2108,a:50,b:1700,d:"#15",e:3,f:1,t:"H"},{x:578,y:-1719,a:100,b:3500,d:"#15",e:3,f:1,t:"H"},{x:2609,y:-2e3,a:80,b:4e3,d:"#24",e:1,f:2,g:1,t:"H"},{x:2449,y:1487,a:400,b:500,d:"#22",e:1,f:1,g:1,n:800,o:1e3,t:"E"},{x:210,y:157,b:50,e:2,f:1,j:"#16",p:"#17",t:"B"},{x:481,y:1491,b:50,e:3,f:1,j:"#18",p:"#19",t:"B"},{x:1322,y:1331,a:60,b:150,e:2,f:1,i:30,j:"#0",k:5,l:120,m:"#20",t:"K"},{x:996,y:1333,a:50,b:125,e:3,f:1,i:25,j:"#14",k:5,l:100,m:"#21",t:"K"},{x:1298,y:1448,b:50,e:2,f:1,j:"#16",p:"#17",t:"B"},{x:246,y:58,a:50,b:125,e:3,f:2,i:25,j:"#14",k:5,l:100,m:"#21",t:"K"},{x:1755,y:-291,a:50,b:125,e:3,f:1,i:25,j:"#14",k:5,l:100,m:"#21",t:"K"},{x:1795,y:-337,a:50,b:175,e:3,f:1,i:25,j:"#14",k:5,l:150,m:"#21",t:"K"},{x:2452,y:-575,a:50,b:125,e:3,f:2,i:25,j:"#14",k:5,l:100,m:"#21",t:"K"},{x:2135,y:-581,a:50,b:125,e:3,f:1,i:25,j:"#14",k:5,l:100,m:"#21",t:"K"},{x:2410,y:-471,b:50,e:3,f:1,j:"#18",p:"#19",t:"B"},{x:2216,y:-525,b:30,e:2,f:1,h:-1,j:"#16",p:"#17",t:"B"},{x:6719,y:163,a:1e3,b:30,d:"#30",e:1,f:1,t:"G"},{x:6759,y:157,a:500,b:50,d:"#30",e:1,f:1,t:"G"},{x:6973,y:133,a:1e3,b:80,d:"#30",e:1,f:1,t:"G"}];var sc={};sc=["#AAD293","#e3f0db","#f9fcf8","#ada490","#61452d","#75685d","#73955F","#d1b8a1","#97ba82","#496b33","#4c5d41","#25361a","#b5df9c","#58803d","#bbe7a2","#96c27c","#8ec36f","#72b44b","#9cd77a","#7dc653","#3E4937","#44503d","#55694a","#1f251c","#3a4b30","#476238","#395a26","#856e5a","#e0d9d3","#a09083","#3b342f"];const tc=[["width","a"],["height","b"],["color","c"],["computedColor","d"],["group","e"],["zIndex","f"],["blur","g"],["scaleX","h"],["foliageRadius","i"],["foliageComputedColor","j"],["trunkWidth","k"],["trunkHeight","l"],["trunkComputedColor","m"],["hillWidth","n"],["hillHeight","o"],["foliageShadowComputedColor","p"],["lightColor","q"],["keyRadius","r"],["patternComputedColor","s"],["type","t"]],uc=[["Bounce","A"],["Bush","B"],["Chest","C"],["Ground","D"],["Hill","E"],["Key","F"],["Land","G"],["Sequoia","H"],["Sky","I"],["Slide","J"],["Tree","K"],["Fade","L"],["Tent","M"]];function vc(e,t){let o=e;return"string"==typeof o&&(o=JSON.parse(o)),o.map(e=>{tc.forEach(([t,o])=>{o in e&&(e[t]=e[o],delete e[o])});const o=uc.find(([t,o])=>o===e.type);if(o){const[t]=o;e.type=t}return Object.keys(e).forEach(o=>{const r=e[o];if("string"==typeof r&&r.includes("#")){const n=r.slice(1),p=t[n];e[o]=p}}),e})}var wc=ga(rc);var xc=ga(sc);const yc=vc(wc.d,xc.d),zc={Ground:Qa,Bounce:Ra,Slide:Sa,Fade:ya,Tree:Ta,Bush:Ua,Hill:Va,Land:Wa,Sequoia:Xa,Sky:Ya,Key:Za,Chest:$a,Tent:_a};function Ac(){const e=qc(),r=new cc,i=new pc(e),t=Bc(),n=t.find(e=>"End"===e.type);n.opacity=0;const $=S({group:2,zIndex:1,x:n.x+n.width/2,y:n.y+n.height-38,width:32,height:32,scaleX:-1,render:$b}),a=t.filter(e=>2===e.group),o=t.filter(e=>1===e.group),s=t.filter(e=>3===e.group),p=(e,r)=>e.filter(e=>e.type===r).map(e=>(e.opacity=0,e)),c=p(a,"Bounce"),d=p(a,"Slide"),l=p(a,"Fade"),u=a.filter(e=>["Ground","Bounce","Slide","Fade"].includes(e.type)).sort((e,r)=>r.y-e.y),I=a.filter(e=>["Key","Chest"].includes(e.type)),m=Lb({textManager:e,onPick:function(e){const r=e=>{e.opacity=1};e===wa?c.forEach(r):e===ja?d.forEach(r):e===ka&&l.forEach(r)}});o.forEach(e=>{e.x=e.x+1.5*m.x*-1}),s.forEach(e=>{e.x=e.x+.1*m.x});const Y=ba({id:"game",isGameStarted:!1,children:[],onStart:function(){this.isGameStarted=!0,this.children=[m,...t.filter(e=>"Spawn"!==e.type),$].sort(ac),this.addChild(e),setTimeout(()=>{e.displayText("I killed the monster that attacked our village. He stoles our colors.",()=>{e.displayText("I'm stucked in the forest, find them and come rescue me.",()=>{e.displayText("Move with 'A', 'D' and jump with 'Space'")})})},500)},update:function(){this.isGameStarted&&(r.update(m,u),i.update(m,I,{removeObject:e=>{const r=I.findIndex(r=>r===e);-1!==r&&(I.splice(r,1),this.removeChild(e))}}),this.camera.x=m.x,this.camera.y=m.y-150,o.forEach(e=>{e.dx=1.5*m.dx*-1}),s.forEach(e=>{e.dx=.1*m.dx}),da(m,n)&&m.inventory.every(e=>["Boots","Bandana","Cloak"].includes(e))&&!this.isEnd&&(this.isEnd=!0,e.displayText("Thank you for saving me hero!",()=>{this.children=[];const e=Ab();this.addChild(e),this.isCredit=!0},!0)),this.isCredit&&(this.camera.x=400,this.camera.y=300))},render:function(){this.children.forEach(e=>e.render())}}),h=zb({onStart:Y.onStart.bind(Y)});return Y.addChild(h),Y}function Bc(){return yc.map(e=>{const r=zc[e.type];return S({...e,render:r?r.render:void 0,update:r?r.update:void 0})})}const{canvas:d}=hb();vb();const fb=Ac(),Cc=qb({update:function(){fb.update()},render:function(){fb.render()}});Cc.start();})();